"use strict";function _get(){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,i){var n=_superPropBase(e,t);if(n)return(n=Object.getOwnPropertyDescriptor(n,t)).get?n.get.call(arguments.length<3?e:i):n.value}).apply(this,arguments)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(i){var n=_isNativeReflectConstruct();return function(){var e,t=_getPrototypeOf(i);return _possibleConstructorReturn(this,n?(e=_getPrototypeOf(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _defineProperty(e,t,i){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,a,o,s,r=[],l=!0,c=!1;try{if(o=(i=i.call(e)).next,0===t){if(Object(i)!==i)return;l=!1}else for(;!(l=(n=o.call(i)).done)&&(r.push(n.value),r.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=i.return&&(s=i.return(),Object(s)!==s))return}finally{if(c)throw a}}return r}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _createForOfIteratorHelper(e,t){var i,n,a,o,s="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(s)return n=!(i=!0),{s:function(){s=s.call(e)},n:function(){var e=s.next();return i=e.done,e},e:function(e){n=!0,a=e},f:function(){try{i||null==s.return||s.return()}finally{if(n)throw a}}};if(Array.isArray(e)||(s=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length)return s&&(e=s),o=0,{s:t=function(){},n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){var i;if(e)return"string"==typeof e?_arrayLikeToArray(e,t):"Map"===(i="Object"===(i=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:i)||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(e,t):void 0}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_toPropertyKey(n.key),n)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(e){e=_toPrimitive(e,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(e,t){if("object"!==_typeof(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0===i)return("string"===t?String:Number)(e);i=i.call(e,t||"default");if("object"!==_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e,t){"object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:self).window=e.window||{})}(void 0,function(F){function P(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1e4;return e=parseFloat(e+"")||0,Math.round((e+Number.EPSILON)*t)/t}function j(e){var t,i;return!!(e&&e instanceof Element&&e.offsetParent)&&(t=e.scrollHeight>e.clientHeight,i=-1!==(e=window.getComputedStyle(e).overflowY).indexOf("hidden"),e=-1!==e.indexOf("visible"),t)&&!i&&!e}function D(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0;return!(!e||e===document.body||t&&e===t)&&(j(e)?e:D(e.parentElement,t))}function m(e){var t=(new DOMParser).parseFromString(e,"text/html").body;if(1<t.childElementCount){for(var i=document.createElement("div");t.firstChild;)i.appendChild(t.firstChild);return i}return t.firstChild}function H(e){return"".concat(e||"").split(" ").filter(function(e){return!!e})}function k(t,e,i){H(e).forEach(function(e){t&&t.classList.toggle(e,i||!1)})}var l=_createClass(function e(t){_classCallCheck(this,e),Object.defineProperty(this,"pageX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"pageY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"nativePointer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.nativePointer=t,this.pageX=t.pageX,this.pageY=t.pageY,this.clientX=t.clientX,this.clientY=t.clientY,this.id=self.Touch&&t instanceof Touch?t.identifier:-1,this.time=Date.now()}),c={passive:!1},B=function(){function r(e,t){var i=t.start,i=void 0===i?function(){return!0}:i,n=t.move,n=void 0===n?function(){}:n,t=t.end,t=void 0===t?function(){}:t;_classCallCheck(this,r),Object.defineProperty(this,"element",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"startCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"moveCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"endCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"currentPointers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"startPointers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.element=e,this.startCallback=i,this.moveCallback=n,this.endCallback=t;for(var a=0,o=["onPointerStart","onTouchStart","onMove","onTouchEnd","onPointerEnd","onWindowBlur"];a<o.length;a++){var s=o[a];this[s]=this[s].bind(this)}this.element.addEventListener("mousedown",this.onPointerStart,c),this.element.addEventListener("touchstart",this.onTouchStart,c),this.element.addEventListener("touchmove",this.onMove,c),this.element.addEventListener("touchend",this.onTouchEnd),this.element.addEventListener("touchcancel",this.onTouchEnd)}return _createClass(r,[{key:"onPointerStart",value:function(e){var t;e.buttons&&0===e.button&&(t=new l(e),this.currentPointers.some(function(e){return e.id===t.id})||this.triggerPointerStart(t,e)&&(window.addEventListener("mousemove",this.onMove),window.addEventListener("mouseup",this.onPointerEnd),window.addEventListener("blur",this.onWindowBlur)))}},{key:"onTouchStart",value:function(e){for(var t=0,i=Array.from(e.changedTouches||[]);t<i.length;t++){var n=i[t];this.triggerPointerStart(new l(n),e)}window.addEventListener("blur",this.onWindowBlur)}},{key:"onMove",value:function(e){var i,n=this,t=this.currentPointers.slice(),a="changedTouches"in e?Array.from(e.changedTouches||[]).map(function(e){return new l(e)}):[new l(e)],o=[],s=_createForOfIteratorHelper(a);try{for(s.s();!(i=s.n()).done;)!function(){var t=i.value,e=n.currentPointers.findIndex(function(e){return e.id===t.id});e<0||(o.push(t),n.currentPointers[e]=t)}()}catch(e){s.e(e)}finally{s.f()}o.length&&this.moveCallback(e,this.currentPointers.slice(),t)}},{key:"onPointerEnd",value:function(e){0<e.buttons&&0!==e.button||(this.triggerPointerEnd(e,new l(e)),window.removeEventListener("mousemove",this.onMove),window.removeEventListener("mouseup",this.onPointerEnd),window.removeEventListener("blur",this.onWindowBlur))}},{key:"onTouchEnd",value:function(e){for(var t=0,i=Array.from(e.changedTouches||[]);t<i.length;t++){var n=i[t];this.triggerPointerEnd(e,new l(n))}}},{key:"triggerPointerStart",value:function(e,t){return!!this.startCallback(t,e,this.currentPointers.slice())&&(this.currentPointers.push(e),this.startPointers.push(e),!0)}},{key:"triggerPointerEnd",value:function(e,t){var i=this.currentPointers.findIndex(function(e){return e.id===t.id});i<0||(this.currentPointers.splice(i,1),this.startPointers.splice(i,1),this.endCallback(e,t,this.currentPointers.slice()))}},{key:"onWindowBlur",value:function(){this.clear()}},{key:"clear",value:function(){for(;this.currentPointers.length;){var e=this.currentPointers[this.currentPointers.length-1];this.currentPointers.splice(this.currentPointers.length-1,1),this.startPointers.splice(this.currentPointers.length-1,1),this.endCallback(new Event("touchend",{bubbles:!0,cancelable:!0,clientX:e.clientX,clientY:e.clientY}),e,this.currentPointers.slice())}}},{key:"stop",value:function(){this.element.removeEventListener("mousedown",this.onPointerStart,c),this.element.removeEventListener("touchstart",this.onTouchStart,c),this.element.removeEventListener("touchmove",this.onMove,c),this.element.removeEventListener("touchend",this.onTouchEnd),this.element.removeEventListener("touchcancel",this.onTouchEnd),window.removeEventListener("mousemove",this.onMove),window.removeEventListener("mouseup",this.onPointerEnd),window.removeEventListener("blur",this.onWindowBlur)}}]),r}();function N(e,t){return t?Math.sqrt(Math.pow(t.clientX-e.clientX,2)+Math.pow(t.clientY-e.clientY,2)):0}function W(e,t){return t?{clientX:(e.clientX+t.clientX)/2,clientY:(e.clientY+t.clientY)/2}:e}function X(e){return"object"==_typeof(e)&&null!==e&&e.constructor===Object&&"[object Object]"===Object.prototype.toString.call(e)}function p(n){for(var e=arguments.length<=1?0:arguments.length-1,t=0;t<e;t++)Object.entries((t+1<1||arguments.length<=t+1?void 0:arguments[t+1])||{}).forEach(function(e){var e=_slicedToArray(e,2),t=e[0],e=e[1],i=Array.isArray(e)?[]:{};n[t]||Object.assign(n,_defineProperty({},t,i)),X(e)?Object.assign(n[t],p(i,e)):Array.isArray(e)?Object.assign(n,_defineProperty({},t,_toConsumableArray(e))):Object.assign(n,_defineProperty({},t,e))});return n}function Y(e,t){return e.split(".").reduce(function(e,t){return"object"==_typeof(e)?e[t]:void 0},t)}function u(e){return e&&null!==e&&e instanceof Element&&"nodeType"in e}function v(t,e){t&&H(e).forEach(function(e){t.classList.remove(e)})}function O(t,e){t&&H(e).forEach(function(e){t.classList.add(e)})}function q(e,t){var i=!0;return function(){i&&(i=!1,e.apply(void 0,arguments),setTimeout(function(){i=!0},t))}}function V(e,t){var i=[];return e.childNodes.forEach(function(e){e.nodeType!==Node.ELEMENT_NODE||t&&!e.matches(t)||i.push(e)}),i}function s(e){var t;return"string"==typeof e||e instanceof HTMLElement?e={html:e}:void 0!==(t=e.thumb)&&("string"==typeof t&&(e.thumbSrc=t),t instanceof HTMLImageElement&&(e.thumbEl=t,e.thumbElSrc=t.src,e.thumbSrc=t.src),delete e.thumb),Object.assign({html:"",el:null,isDom:!1,class:"",customClass:"",index:-1,dim:0,gap:0,pos:0,transition:!1},e)}function Z(e){var t,i,n=window.pageYOffset,a=window.pageYOffset+window.innerHeight;return!u(e)||(t=(e=e.getBoundingClientRect()).y+window.pageYOffset,(i=e.y+e.height+window.pageYOffset)<n)||a<t?0:n<t&&i<a||t<n&&a<i?100:(e=e.height,t<n&&(e-=window.pageYOffset-t),a<i&&(e-=i-a),n=e/window.innerHeight*100,Math.round(n))}function U(e){if(e&&C){void 0===K&&document.createElement("div").focus({get preventScroll(){return!(K=!0)}});try{var t,i;K?e.focus({preventScroll:!0}):(t=window.pageXOffset||document.body.scrollTop,i=window.pageYOffset||document.body.scrollLeft,e.focus(),document.body.scrollTo({top:t,left:i,behavior:"auto"}))}catch(e){}}}function G(){queueMicrotask(function(){var e=(t=S.parseURL()).slug,t=t.index,i=R.getInstance();if(i&&!1!==i.option("Hash")){var n=i.carousel;if(e&&n){var a,o=_createForOfIteratorHelper(n.slides);try{for(o.s();!(a=o.n()).done;){var s=a.value;if(s.slug&&s.slug===e)return void n.slideTo(s.index)}}catch(e){o.e(e)}finally{o.f()}if(e===i.option("slug"))return void n.slideTo(t-1);var r=i.getSlide(),r=r&&r.triggerEl&&r.triggerEl.dataset;if(r&&r.fancybox===e)return void n.slideTo(t-1)}S.hasSilentClose=!0,i.close()}S.startFromUrl()})}var y,b,K,d,w,e=function(){function a(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},i=(_classCallCheck(this,a),Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),this.setOptions(t),_createForOfIteratorHelper(Object.getOwnPropertyNames(Object.getPrototypeOf(this))));try{for(i.s();!(e=i.n()).done;){var n=e.value;n.startsWith("on")&&"function"==typeof this[n]&&(this[n]=this[n].bind(this))}}catch(e){i.e(e)}finally{i.f()}}return _createClass(a,[{key:"setOptions",value:function(e){this.options=e?p({},this.constructor.defaults,e):{};for(var t=0,i=Object.entries(this.option("on")||{});t<i.length;t++){var n=_slicedToArray(i[t],2),a=n[0],n=n[1];this.on(a,n)}}},{key:"option",value:function(e){for(var e=Y(e,this.options),t=arguments.length,i=new Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return e=e&&"function"==typeof e?e.call.apply(e,[this,this].concat(i)):e}},{key:"optionFor",value:function(e,t,i){for(var n=Y(t,e),a=arguments.length,o=new Array(3<a?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];(n="false"===(n="true"===(n="string"!=typeof(r=n)||isNaN(r)||isNaN(parseFloat(r))?n:parseFloat(n))?!0:n)?!1:n)&&"function"==typeof n&&(n=n.call.apply(n,[this,this,e].concat(o)));var r=Y(t,this.options);return r&&"function"==typeof r?n=r.call.apply(r,[this,this,e].concat(o,[n])):void 0===n&&(n=r),void 0===n?i:n}},{key:"cn",value:function(e){var t=this.options.classes;return t&&t[e]||""}},{key:"localize",value:function(e){var a=this,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];e=String(e).replace(/\{\{(\w+).?(\w+)?\}\}/g,function(e,t,i){var n="";return i?n=a.option("".concat(t[0]+t.toLowerCase().substring(1),".l10n.").concat(i)):t&&(n=a.option("l10n.".concat(t))),n=n||e});for(var i=0;i<t.length;i++)e=e.split(t[i][0]).join(t[i][1]);return e.replace(/\{\{(.*?)\}\}/g,function(e,t){return t})}},{key:"on",value:function(e,i){var n=this,t=[];"string"==typeof e?t=e.split(" "):Array.isArray(e)&&(t=e),this.events||(this.events=new Map),t.forEach(function(e){var t=n.events.get(e);t||(n.events.set(e,[]),t=[]),t.includes(i)||t.push(i),n.events.set(e,t)})}},{key:"off",value:function(e,i){var n=this,t=[];"string"==typeof e?t=e.split(" "):Array.isArray(e)&&(t=e),t.forEach(function(e){var t,e=n.events.get(e);Array.isArray(e)&&-1<(t=e.indexOf(i))&&e.splice(t,1)})}},{key:"emit",value:function(e){for(var t=this,i=arguments.length,n=new Array(1<i?i-1:0),a=1;a<i;a++)n[a-1]=arguments[a];_toConsumableArray(this.events.get(e)||[]).forEach(function(e){return e.apply(void 0,[t].concat(n))}),"*"!==e&&this.emit.apply(this,["*",e].concat(n))}}]),a}(),J=(Object.defineProperty(e,"version",{enumerable:!0,configurable:!0,writable:!0,value:"5.0.22"}),Object.defineProperty(e,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{}}),function(){_inherits(i,e);var t=_createSuper(i);function i(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,i),e=t.call(this,e),Object.defineProperty(_assertThisInitialized(e),"plugins",{enumerable:!0,configurable:!0,writable:!0,value:{}}),e}return _createClass(i,[{key:"attachPlugins",value:function(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=new Map,i=0,n=Object.entries(e);i<n.length;i++){var a=_slicedToArray(n[i],2),o=a[0],a=a[1],s=this.option(o),r=this.plugins[o];r||!1===s?r&&!1===s&&(r.detach(),delete this.plugins[o]):t.set(o,new a(this,s||{}))}var l,c=_createForOfIteratorHelper(t);try{for(c.s();!(l=c.n()).done;){var u=_slicedToArray(l.value,2),h=u[0],d=u[1];(this.plugins[h]=d).attach()}}catch(e){c.e(e)}finally{c.f()}this.emit("attachPlugins")}},{key:"detachPlugins",value:function(e){var t,i=_createForOfIteratorHelper(e=e||Object.keys(this.plugins));try{for(i.s();!(t=i.n()).done;){var n=t.value,a=this.plugins[n];a&&a.detach(),delete this.plugins[n]}}catch(e){i.e(e)}finally{i.f()}return this.emit("detachPlugins"),this}}]),i}()),T=((t=y=y||{})[t.Init=0]="Init",t[t.Error=1]="Error",t[t.Ready=2]="Ready",t[t.Panning=3]="Panning",t[t.Mousemove=4]="Mousemove",t[t.Destroy=5]="Destroy",["a","b","c","d","e","f"]),t={PANUP:"Move up",PANDOWN:"Move down",PANLEFT:"Move left",PANRIGHT:"Move right",ZOOMIN:"Zoom in",ZOOMOUT:"Zoom out",TOGGLEZOOM:"Toggle zoom level",TOGGLE1TO1:"Toggle zoom level",ITERATEZOOM:"Toggle zoom level",ROTATECCW:"Rotate counterclockwise",ROTATECW:"Rotate clockwise",FLIPX:"Flip horizontally",FLIPY:"Flip vertically",FITX:"Fit horizontally",FITY:"Fit vertically",RESET:"Reset",TOGGLEFS:"Toggle fullscreen"},i={content:null,width:"auto",height:"auto",panMode:"drag",touch:!0,dragMinThreshold:3,lockAxis:!1,mouseMoveFactor:1,mouseMoveFriction:.12,zoom:!0,pinchToZoom:!0,panOnlyZoomed:"auto",minScale:1,maxScale:2,friction:.25,dragFriction:.35,decelFriction:.05,click:"toggleZoom",dblClick:!1,wheel:"zoom",wheelLimit:7,spinner:!0,bounds:"auto",infinite:!1,rubberband:!0,bounce:!0,maxVelocity:75,transformParent:!1,classes:{content:"f-panzoom__content",isLoading:"is-loading",canZoomIn:"can-zoom_in",canZoomOut:"can-zoom_out",isDraggable:"is-draggable",isDragging:"is-dragging",inFullscreen:"in-fullscreen",htmlHasFullscreen:"with-panzoom-in-fullscreen"},l10n:t},h='<div class="f-spinner"><svg viewBox="0 0 50 50"><circle cx="25" cy="25" r="20"></circle><circle cx="25" cy="25" r="20"></circle></svg></div>',g={a:1,b:0,c:0,d:1,e:0,f:0},x="mousemove",$="content",Q=null,ee=null,f=function(){_inherits(o,J);var a=_createSuper(o);function o(e){var t,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(_classCallCheck(this,o),t=a.call(this,i),Object.defineProperty(_assertThisInitialized(t),"pointerTracker",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(_assertThisInitialized(t),"resizeObserver",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(_assertThisInitialized(t),"updateTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(_assertThisInitialized(t),"clickTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(_assertThisInitialized(t),"rAF",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(_assertThisInitialized(t),"isTicking",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(_assertThisInitialized(t),"friction",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(_assertThisInitialized(t),"ignoreBounds",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(_assertThisInitialized(t),"isBouncingX",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(_assertThisInitialized(t),"isBouncingY",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(_assertThisInitialized(t),"clicks",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(_assertThisInitialized(t),"trackingPoints",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(_assertThisInitialized(t),"pwt",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(_assertThisInitialized(t),"cwd",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(_assertThisInitialized(t),"pmme",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(_assertThisInitialized(t),"state",{enumerable:!0,configurable:!0,writable:!0,value:y.Init}),Object.defineProperty(_assertThisInitialized(t),"isDragging",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(_assertThisInitialized(t),"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(_assertThisInitialized(t),"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(_assertThisInitialized(t),"spinner",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(_assertThisInitialized(t),"containerRect",{enumerable:!0,configurable:!0,writable:!0,value:{width:0,height:0,innerWidth:0,innerHeight:0}}),Object.defineProperty(_assertThisInitialized(t),"contentRect",{enumerable:!0,configurable:!0,writable:!0,value:{top:0,right:0,bottom:0,left:0,fullWidth:0,fullHeight:0,fitWidth:0,fitHeight:0,width:0,height:0}}),Object.defineProperty(_assertThisInitialized(t),"dragStart",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0,top:0,left:0,time:0}}),Object.defineProperty(_assertThisInitialized(t),"dragOffset",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0,time:0}}),Object.defineProperty(_assertThisInitialized(t),"current",{enumerable:!0,configurable:!0,writable:!0,value:Object.assign({},g)}),Object.defineProperty(_assertThisInitialized(t),"target",{enumerable:!0,configurable:!0,writable:!0,value:Object.assign({},g)}),Object.defineProperty(_assertThisInitialized(t),"velocity",{enumerable:!0,configurable:!0,writable:!0,value:{a:0,b:0,c:0,d:0,e:0,f:0}}),Object.defineProperty(_assertThisInitialized(t),"lockedAxis",{enumerable:!0,configurable:!0,writable:!0,value:!1}),!e)throw new Error("Container Element Not Found");t.container=e,t.initContent(),t.attachPlugins(Object.assign(Object.assign({},o.Plugins),n)),t.emit("init");i=t.content;return i.addEventListener("load",t.onLoad),i.addEventListener("error",t.onError),t.isContentLoading?(t.option("spinner")&&(e.classList.add(t.cn("isLoading")),n=m(h),!e.contains(i)||i.parentElement instanceof HTMLPictureElement?t.spinner=e.appendChild(n):t.spinner=(null==(e=i.parentElement)?void 0:e.insertBefore(n,i))||null),t.emit("beforeLoad")):queueMicrotask(function(){t.enable()}),_possibleConstructorReturn(t)}return _createClass(o,[{key:"isTouchDevice",get:function(){return ee=null===ee?window.matchMedia("(hover: none)").matches:ee}},{key:"isMobile",get:function(){return Q=null===Q?/iPhone|iPad|iPod|Android/i.test(navigator.userAgent):Q}},{key:"panMode",get:function(){return this.options.panMode!==x||this.isTouchDevice?"drag":x}},{key:"panOnlyZoomed",get:function(){var e=this.options.panOnlyZoomed;return"auto"===e?this.isTouchDevice:e}},{key:"isInfinite",get:function(){return this.option("infinite")}},{key:"angle",get:function(){return 180*Math.atan2(this.current.b,this.current.a)/Math.PI||0}},{key:"targetAngle",get:function(){return 180*Math.atan2(this.target.b,this.target.a)/Math.PI||0}},{key:"scale",get:function(){var e=this.current,t=e.a,e=e.b;return Math.sqrt(t*t+e*e)||1}},{key:"targetScale",get:function(){var e=this.target,t=e.a,e=e.b;return Math.sqrt(t*t+e*e)||1}},{key:"minScale",get:function(){return this.option("minScale")||1}},{key:"fullScale",get:function(){var e=this.contentRect;return e.fullWidth/e.fitWidth||1}},{key:"maxScale",get:function(){return this.fullScale*(this.option("maxScale")||1)||1}},{key:"coverScale",get:function(){var e=this.containerRect,t=this.contentRect,e=Math.max(e.height/t.fitHeight,e.width/t.fitWidth)||1;return Math.min(this.fullScale,e)}},{key:"isScaling",get:function(){return 1e-5<Math.abs(this.targetScale-this.scale)&&!this.isResting}},{key:"isContentLoading",get:function(){var e=this.content;return!!(e&&e instanceof HTMLImageElement)&&!e.complete}},{key:"isResting",get:function(){if(this.isBouncingX||this.isBouncingY)return!1;for(var e=0,t=T;e<t.length;e++){var i=t[e],n="e"==i||"f"===i?.001:1e-5;if(Math.abs(this.target[i]-this.current[i])>n)return!1}return!(!this.ignoreBounds&&!this.checkBounds().inBounds)}},{key:"initContent",value:function(){var e=this.container,t=this.cn($),i=this.option($)||e.querySelector(".".concat(t));if(i||(i=e.querySelector("img,picture")||e.firstElementChild)&&O(i,t),!(i=i instanceof HTMLPictureElement?i.querySelector("img"):i))throw new Error("No content found");this.content=i}},{key:"onLoad",value:function(){this.spinner&&(this.spinner.remove(),this.spinner=null),this.option("spinner")&&this.container.classList.remove(this.cn("isLoading")),this.emit("afterLoad"),this.state===y.Init?this.enable():this.updateMetrics()}},{key:"onError",value:function(){this.state!==y.Destroy&&(this.spinner&&(this.spinner.remove(),this.spinner=null),this.stop(),this.detachEvents(),this.state=y.Error,this.emit("error"))}},{key:"attachObserver",value:function(){function e(){return.1<Math.abs(i.containerRect.width-i.container.getBoundingClientRect().width)||.1<Math.abs(i.containerRect.height-i.container.getBoundingClientRect().height)}var t,i=this;this.resizeObserver||void 0===window.ResizeObserver||(this.resizeObserver=new ResizeObserver(function(){i.updateTimer||(e()?(i.onResize(),i.isMobile&&(i.updateTimer=setTimeout(function(){e()&&i.onResize(),i.updateTimer=null},500))):i.updateTimer&&(clearTimeout(i.updateTimer),i.updateTimer=null))})),null!=(t=this.resizeObserver)&&t.observe(this.container)}},{key:"detachObserver",value:function(){var e;null!=(e=this.resizeObserver)&&e.disconnect()}},{key:"attachEvents",value:function(){var e=this.container;e.addEventListener("click",this.onClick,{passive:!1,capture:!1}),e.addEventListener("wheel",this.onWheel,{passive:!1}),this.pointerTracker=new B(e,{start:this.onPointerDown,move:this.onPointerMove,end:this.onPointerUp}),document.addEventListener(x,this.onMouseMove)}},{key:"detachEvents",value:function(){var e=this.container;e.removeEventListener("click",this.onClick,{passive:!1,capture:!1}),e.removeEventListener("wheel",this.onWheel,{passive:!1}),null!=(e=this.pointerTracker)&&e.stop(),this.pointerTracker=null,document.removeEventListener(x,this.onMouseMove),document.removeEventListener("keydown",this.onKeydown,!0),this.clickTimer&&(clearTimeout(this.clickTimer),this.clickTimer=null),this.updateTimer&&(clearTimeout(this.updateTimer),this.updateTimer=null)}},{key:"animate",value:function(){for(var e=this,t=this.friction,i=(this.setTargetForce(),this.option("maxVelocity")),n=0,a=T;n<a.length;n++){var o=a[n];t?(this.velocity[o]*=1-t,i&&!this.isScaling&&(this.velocity[o]=Math.max(Math.min(this.velocity[o],i),-1*i)),this.current[o]+=this.velocity[o]):this.current[o]=this.target[o]}this.setTransform(),this.setEdgeForce(),!this.isResting||this.isDragging?this.rAF=requestAnimationFrame(function(){return e.animate()}):this.stop("current")}},{key:"setTargetForce",value:function(){for(var e=0,t=T;e<t.length;e++){var i=t[e];"e"===i&&this.isBouncingX||"f"===i&&this.isBouncingY||(this.velocity[i]=(1/(1-this.friction)-1)*(this.target[i]-this.current[i]))}}},{key:"checkBounds",value:function(){var e=this.current,t=e.e+(0<arguments.length&&void 0!==arguments[0]?arguments[0]:0),e=e.f+(1<arguments.length&&void 0!==arguments[1]?arguments[1]:0),i=this.getBounds(),n=i.x,a=i.y,o=n.min,n=n.max,s=a.min,a=a.max,r=0,l=0;return o!==1/0&&t<o?r=o-t:n!==1/0&&n<t&&(r=n-t),s!==1/0&&e<s?l=s-e:a!==1/0&&a<e&&(l=a-e),Math.abs(r)<.001&&(r=0),Math.abs(l)<.001&&(l=0),Object.assign(Object.assign({},i),{xDiff:r,yDiff:l,inBounds:!r&&!l})}},{key:"clampTargetBounds",value:function(){var e=this.target,t=this.getBounds(),i=t.x,t=t.y;i.min!==1/0&&(e.e=Math.max(e.e,i.min)),i.max!==1/0&&(e.e=Math.min(e.e,i.max)),t.min!==1/0&&(e.f=Math.max(e.f,t.min)),t.max!==1/0&&(e.f=Math.min(e.f,t.max))}},{key:"calculateContentDim",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.current,t=this.content,i=this.contentRect,n=i.fitWidth,a=i.fitHeight,o=i.fullWidth,i=i.fullHeight,s=o,r=i;return!this.option("zoom")&&0===this.angle||(o=(t=!(t instanceof HTMLImageElement||"none"!==window.getComputedStyle(t).maxWidth&&"none"!==window.getComputedStyle(t).maxHeight))?o:n,n=t?i:a,t=this.getMatrix(e),i=new DOMPoint(0,0).matrixTransform(t),a=new DOMPoint(0+o,0).matrixTransform(t),e=new DOMPoint(0+o,0+n).matrixTransform(t),o=new DOMPoint(0,0+n).matrixTransform(t),n=Math.abs(e.x-i.x),t=Math.abs(e.y-i.y),e=Math.abs(o.x-a.x),i=Math.abs(o.y-a.y),s=Math.max(n,e),r=Math.max(t,i)),{contentWidth:s,contentHeight:r}}},{key:"setEdgeForce",value:function(){var e,t,i,n,a,o,s,r;this.ignoreBounds||this.isDragging||this.panMode===x||this.targetScale<this.scale?(this.isBouncingX=!1,this.isBouncingY=!1):(e=this.target,t=(a=this.checkBounds()).x,i=a.y,n=a.xDiff,a=a.yDiff,o=this.option("maxVelocity"),s=this.velocity.e,r=this.velocity.f,0!==n?(this.isBouncingX=!0,n*s<=0?s+=.14*n:(s=.14*n,t.min!==1/0&&(this.target.e=Math.max(e.e,t.min)),t.max!==1/0&&(this.target.e=Math.min(e.e,t.max))),o&&(s=Math.max(Math.min(s,o),-1*o))):this.isBouncingX=!1,0!==a?(this.isBouncingY=!0,a*r<=0?r+=.14*a:(r=.14*a,i.min!==1/0&&(this.target.f=Math.max(e.f,i.min)),i.max!==1/0&&(this.target.f=Math.min(e.f,i.max))),o&&(r=Math.max(Math.min(r,o),-1*o))):this.isBouncingY=!1,this.isBouncingX&&(this.velocity.e=s),this.isBouncingY&&(this.velocity.f=r))}},{key:"enable",value:function(){for(var e=this.content,t=new DOMMatrixReadOnly(window.getComputedStyle(e).transform),i=0,n=T;i<n.length;i++){var a=n[i];this.current[a]=this.target[a]=t[a]}this.updateMetrics(),this.attachObserver(),this.attachEvents(),this.state=y.Ready,this.emit("ready")}},{key:"onClick",value:function(t){var i=this,e=(this.isDragging&&(null!=(e=this.pointerTracker)&&e.clear(),this.trackingPoints=[],this.startDecelAnim()),t.target);if(e&&!t.defaultPrevented)if(e&&e.hasAttribute("disabled"))t.preventDefault(),t.stopPropagation();else if(!(s=window.getSelection())||"Range"!==s.type||e.closest("button")){var n,a,o,s=e.closest("[data-panzoom-action]"),e=e.closest("[data-panzoom-change]"),s=s||e,e=s&&u(s)?s.dataset:null;if(e){s=e.panzoomChange,e=e.panzoomAction;if((s||e)&&t.preventDefault(),s){var r={};try{r=JSON.parse(s)}catch(t){console&&console.warn("The given data was not valid JSON")}return void this.applyChange(r)}if(e)return void(this[e]&&this[e]())}3<Math.abs(this.dragOffset.x)||3<Math.abs(this.dragOffset.y)?(t.preventDefault(),t.stopPropagation()):(s=this.content.getBoundingClientRect(),this.dragStart.time&&!this.canZoomOut()&&(2<Math.abs(s.x-this.dragStart.x)||2<Math.abs(s.y-this.dragStart.y))||(this.dragStart.time=0,n=function(e){i.option("zoom")&&e&&"string"==typeof e&&/(iterateZoom)|(toggle(Zoom|Full|Cover|Max)|(zoomTo(Fit|Cover|Max)))/.test(e)&&"function"==typeof i[e]&&(t.preventDefault(),i[e]({event:t}))},a=this.option("click",t),(o=this.option("dblClick",t))?(this.clicks++,1==this.clicks&&(this.clickTimer=setTimeout(function(){1===i.clicks?(i.emit("click",t),!t.defaultPrevented&&a&&n(a)):(i.emit("dblClick",t),t.defaultPrevented||n(o)),i.clicks=0,i.clickTimer=null},350))):(this.emit("click",t),!t.defaultPrevented&&a&&n(a))))}}},{key:"addTrackingPoint",value:function(e){var t=this.trackingPoints.filter(function(e){return e.time>Date.now()-100});t.push(e),this.trackingPoints=t}},{key:"onPointerDown",value:function(e,t,i){if(!1===this.option("touch",e))return!1;this.pwt=0,this.dragOffset={x:0,y:0,time:0},this.trackingPoints=[];var n=this.content.getBoundingClientRect();if(this.dragStart={x:n.x,y:n.y,top:n.top,left:n.left,time:Date.now()},this.clickTimer)return!1;if(this.panMode===x&&1<this.targetScale)return e.preventDefault(),e.stopPropagation(),!1;n=e.composedPath()[0];if(!i.length){if(["TEXTAREA","OPTION","INPUT","SELECT","VIDEO","IFRAME"].includes(n.nodeName)||n.closest("[contenteditable]")||n.closest("[data-selectable]")||n.closest("[data-draggable]")||n.closest("[data-clickable]")||n.closest("[data-panzoom-change]")||n.closest("[data-panzoom-action]"))return!1;null!=(i=window.getSelection())&&i.removeAllRanges()}if("mousedown"===e.type)["A","BUTTON"].includes(n.nodeName)||e.preventDefault();else if(.3<Math.abs(this.velocity.a))return!1;return this.target.e=this.current.e,this.target.f=this.current.f,this.stop(),this.isDragging||(this.isDragging=!0,this.addTrackingPoint(t),this.emit("touchStart",e)),!0}},{key:"onPointerMove",value:function(e,t,i){if(!1!==this.option("touch",e)&&this.isDragging&&!(t.length<2&&this.panOnlyZoomed&&P(this.targetScale)<=P(this.minScale)||(this.emit("touchMove",e),e.defaultPrevented))){this.addTrackingPoint(t[0]);var n=this.content,a=W(i[0],i[1]),o=W(t[0],t[1]),s=0,r=0,n=(1<t.length&&(n=n.getBoundingClientRect(),s=a.clientX-n.left-.5*n.width,r=a.clientY-n.top-.5*n.height),N(i[0],i[1])),i=N(t[0],t[1]),t=n?i/n:1,i=o.clientX-a.clientX,n=o.clientY-a.clientY,o=(this.dragOffset.x+=i,this.dragOffset.y+=n,this.dragOffset.time=Date.now()-this.dragStart.time,P(this.targetScale)===P(this.minScale)&&this.option("lockAxis"));if(o&&!this.lockedAxis)if("xy"===o||"y"===o||"touchmove"===e.type){if(Math.abs(this.dragOffset.x)<6&&Math.abs(this.dragOffset.y)<6)return void e.preventDefault();var a=Math.abs(180*Math.atan2(this.dragOffset.y,this.dragOffset.x)/Math.PI);this.lockedAxis=45<a&&a<135?"y":"x",this.dragOffset.x=0,n=i=this.dragOffset.y=0}else this.lockedAxis=o;D(e.target,this.content)&&(o="x",this.dragOffset.y=0),o&&"xy"!==o&&this.lockedAxis!==o&&P(this.targetScale)===P(this.minScale)||(e.cancelable&&e.preventDefault(),this.container.classList.add(this.cn("isDragging")),a=this.checkBounds(i,n),this.option("rubberband")?("x"!==this.isInfinite&&(0<a.xDiff&&i<0||a.xDiff<0&&0<i)&&(i*=Math.max(0,.5-Math.abs(.75/this.contentRect.fitWidth*a.xDiff))),"y"!==this.isInfinite&&(0<a.yDiff&&n<0||a.yDiff<0&&0<n)&&(n*=Math.max(0,.5-Math.abs(.75/this.contentRect.fitHeight*a.yDiff)))):(a.xDiff&&(i=0),a.yDiff&&(n=0)),o=this.targetScale,e=this.minScale,a=this.maxScale,o<.5*e&&(t=Math.max(t,e)),1.5*a<o&&(t=Math.min(t,a)),"y"===this.lockedAxis&&P(o)===P(e)&&(i=0),"x"===this.lockedAxis&&P(o)===P(e)&&(n=0),this.applyChange({originX:s,originY:r,panX:i,panY:n,scale:t,friction:this.option("dragFriction"),ignoreBounds:!0}))}}},{key:"onPointerUp",value:function(e,t,i){i.length?(this.dragOffset.x=0,this.dragOffset.y=0,this.trackingPoints=[]):(this.container.classList.remove(this.cn("isDragging")),this.isDragging&&(this.addTrackingPoint(t),this.panOnlyZoomed&&this.contentRect.width-this.contentRect.fitWidth<1&&this.contentRect.height-this.contentRect.fitHeight<1&&(this.trackingPoints=[]),D(e.target,this.content)&&"y"===this.lockedAxis&&(this.trackingPoints=[]),this.emit("touchEnd",e),this.isDragging=!1,this.lockedAxis=!1,this.state!==y.Destroy)&&!e.defaultPrevented&&this.startDecelAnim())}},{key:"startDecelAnim",value:function(){var e=this.isScaling;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.isBouncingX=!1,this.isBouncingY=!1;for(var t=0,i=T;t<i.length;t++)this.velocity[i[t]]=0;this.target.e=this.current.e,this.target.f=this.current.f,v(this.container,"is-scaling"),v(this.container,"is-animating"),this.isTicking=!1;var n=this.trackingPoints,a=n[0],n=n[n.length-1],o=0,s=0,r=0,a=(n&&a&&(o=n.clientX-a.clientX,s=n.clientY-a.clientY,r=n.time-a.time),(null==(n=window.visualViewport)?void 0:n.scale)||1),n=(1!==a&&(o*=a,s*=a),0),a=0,l=0,c=0,u=this.option("decelFriction"),h=this.targetScale,s=(0<r&&(l=3<Math.abs(o)?o/(r/30):0,c=3<Math.abs(s)?s/(r/30):0,o=this.option("maxVelocity"))&&(l=Math.max(Math.min(l,o),-1*o),c=Math.max(Math.min(c,o),-1*o)),l&&(n=l/(1/(1-u)-1)),c&&(a=c/(1/(1-u)-1)),("y"===this.option("lockAxis")||"xy"===this.option("lockAxis")&&"y"===this.lockedAxis&&P(h)===this.minScale)&&(n=l=0),("x"===this.option("lockAxis")||"xy"===this.option("lockAxis")&&"x"===this.lockedAxis&&P(h)===this.minScale)&&(a=c=0),this.dragOffset.x),r=this.dragOffset.y,o=this.option("dragMinThreshold")||0;Math.abs(s)<o&&Math.abs(r)<o&&(l=c=n=a=0),(h<this.minScale-1e-5||h>this.maxScale+1e-5||e&&!n&&!a)&&(u=.35),this.applyChange({panX:n,panY:a,friction:u}),this.emit("decel",l,c,s,r)}},{key:"onWheel",value:function(e){var t=[-e.deltaX||0,-e.deltaY||0,-e.detail||0].reduce(function(e,t){return Math.abs(t)>Math.abs(e)?t:e}),t=Math.max(-1,Math.min(1,t));this.emit("wheel",e,t),this.panMode===x||e.defaultPrevented||("pan"===(t=this.option("wheel"))?(e.preventDefault(),this.panOnlyZoomed&&!this.canZoomOut()||this.applyChange({panX:2*-e.deltaX,panY:2*-e.deltaY,bounce:!1})):"zoom"===t&&!1!==this.option("zoom")&&this.zoomWithWheel(e))}},{key:"onMouseMove",value:function(e){this.panWithMouse(e)}},{key:"onKeydown",value:function(e){"Escape"===e.key&&this.toggleFS()}},{key:"onResize",value:function(){this.updateMetrics(),this.checkBounds().inBounds||this.requestTick()}},{key:"setTransform",value:function(){this.emit("beforeTransform");for(var e=this.current,t=this.target,i=this.content,n=this.contentRect,a=Object.assign({},g),o=0,s=T;o<s.length;o++){var r=s[o];a[r]=P(e[r],"e"==r||"f"===r?1e3:1e5),Math.abs(t[r]-e[r])<("e"==r||"f"===r?.51:.001)&&(e[r]=t[r])}var l=a.a,c=a.b,u=a.c,h=a.d,d=a.e,f=a.f,l="matrix(".concat(l,", ").concat(c,", ").concat(u,", ").concat(h,", ").concat(d,", ").concat(f,")"),c=i.parentElement instanceof HTMLPictureElement?i.parentElement:i;(c=this.option("transformParent")?c.parentElement||c:c).style.transform!==l&&(c.style.transform=l,h=(u=this.calculateContentDim()).contentWidth,d=u.contentHeight,n.width=h,n.height=d,this.emit("afterTransform"))}},{key:"updateMetrics",value:function(){var e,t,i,n,a,o,s,r,l,c,u,h,d,f,p,v=0<arguments.length&&void 0!==arguments[0]&&arguments[0];this&&this.state!==y.Destroy&&!this.isContentLoading&&(l=Math.max(1,(null==(l=window.visualViewport)?void 0:l.scale)||1),t=this.container,e=(s=this.content)instanceof HTMLImageElement,t=t.getBoundingClientRect(),n=getComputedStyle(this.container),i=t.width*l,a=t.height*l,o=parseFloat(n.paddingTop)+parseFloat(n.paddingBottom),n=i-(parseFloat(n.paddingLeft)+parseFloat(n.paddingRight)),this.containerRect={width:i,height:a,innerWidth:n,innerHeight:a-o},i=this.option("width")||"auto",n=this.option("height")||"auto","auto"===i&&(i=parseFloat(s.dataset.width||"")||((a=s)instanceof HTMLImageElement?a.naturalWidth:a instanceof SVGElement?a.width.baseVal.value:Math.max(a.offsetWidth,a.scrollWidth))||0),"auto"===n&&(n=parseFloat(s.dataset.height||"")||((o=s)instanceof HTMLImageElement?o.naturalHeight:o instanceof SVGElement?o.height.baseVal.value:Math.max(o.offsetHeight,o.scrollHeight))||0),a=s.parentElement instanceof HTMLPictureElement?s.parentElement:s,o=(a=this.option("transformParent")?a.parentElement||a:a).getAttribute("style")||"",a.style.setProperty("transform","none","important"),e&&(a.style.width="",a.style.height=""),a.offsetHeight,s=s.getBoundingClientRect(),r=s.width*l,l=s.height*l,u=c=0,e&&(1<Math.abs(i-r)||1<Math.abs(n-l))&&(f=(h=r)/l<(p=(d=i)/(f=n))?(d=h)/p:(d=l*p,l),r=(p={width:d,height:f,top:.5*(l-f),left:.5*(h-d)}).width,l=p.height,c=p.top,u=p.left),this.contentRect=Object.assign(Object.assign({},this.contentRect),{top:s.top-t.top+c,bottom:t.bottom-s.bottom+c,left:s.left-t.left+u,right:t.right-s.right+u,fitWidth:r,fitHeight:l,width:r,height:l,fullWidth:i,fullHeight:n}),a.style.cssText=o,e&&(a.style.width="".concat(r,"px"),a.style.height="".concat(l,"px")),this.setTransform(),!0!==v&&this.emit("refresh"),this.ignoreBounds||(P(this.targetScale)<P(this.minScale)?this.zoomTo(this.minScale,{friction:0}):this.targetScale>this.maxScale?this.zoomTo(this.maxScale,{friction:0}):this.state===y.Init||this.checkBounds().inBounds||this.requestTick()),this.updateControls())}},{key:"getBounds",value:function(){var e,t,i,n,a,o,s,r,l,c,u,h=this.option("bounds");return"auto"!==h?h:(e=(h=this.calculateContentDim(this.target)).contentWidth,h=h.contentHeight,!(l=o=c=s=0)===(t=this.option("infinite"))||this.lockedAxis&&t===this.lockedAxis?(c=s=-1/0,l=o=1/0):(t=this.containerRect,i=this.contentRect,r=P(this.contentRect.fitWidth*this.targetScale,1e3),u=P(this.contentRect.fitHeight*this.targetScale,1e3),n=t.innerWidth,a=t.innerHeight,this.containerRect.width===r&&(n=t.width),this.containerRect.width===u&&(a=t.height),n<e&&(s=-1*(o=.5*(e-n)),s+=r=.5*(i.right-i.left),o+=r),this.contentRect.fitWidth>n&&e<n&&(s-=.5*(this.contentRect.fitWidth-n),o-=.5*(this.contentRect.fitWidth-n)),a<h&&(c=-1*(l=.5*(h-a)),c+=u=.5*(i.bottom-i.top),l+=u),this.contentRect.fitHeight>a&&h<a&&(s-=.5*(this.contentRect.fitHeight-a),o-=.5*(this.contentRect.fitHeight-a))),{x:{min:s,max:o},y:{min:c,max:l}})}},{key:"updateControls",value:function(){var e,t=this,i=t.container,n=t.panMode,a=t.contentRect,o=t.fullScale,s=t.targetScale,r=t.coverScale,l=t.maxScale,c=t.minScale,l={toggleMax:s-c<.5*(l-c)?l:c,toggleCover:s-c<.5*(r-c)?r:c,toggleZoom:s-c<.5*(o-c)?o:c}[t.option("click")||""]||c,u=t.canZoomIn(),h=t.canZoomOut(),r="drag"===n&&!!this.option("touch"),o=h&&r,t=(r&&(P(s)<P(c)&&!this.panOnlyZoomed&&(o=!0),P(a.width,1)>P(a.fitWidth,1)||P(a.height,1)>P(a.fitHeight,1))&&(o=!0),P(a.width*s,1)<P(a.fitWidth,1)&&(o=!1),n===x&&(o=!1),u&&P(l)>P(s)),r=!t&&!o&&h&&P(l)<P(s),d=(k(i,this.cn("canZoomIn"),t),k(i,this.cn("canZoomOut"),r),k(i,this.cn("isDraggable"),o),_createForOfIteratorHelper(i.querySelectorAll('[data-panzoom-action="zoomIn"]')));try{for(d.s();!(e=d.n()).done;){var f=e.value;u?(f.removeAttribute("disabled"),f.removeAttribute("tabindex")):(f.setAttribute("disabled",""),f.setAttribute("tabindex","-1"))}}catch(e){d.e(e)}finally{d.f()}var p,v=_createForOfIteratorHelper(i.querySelectorAll('[data-panzoom-action="zoomOut"]'));try{for(v.s();!(p=v.n()).done;){var g=p.value;h?(g.removeAttribute("disabled"),g.removeAttribute("tabindex")):(g.setAttribute("disabled",""),g.setAttribute("tabindex","-1"))}}catch(e){v.e(e)}finally{v.f()}var m,y=_createForOfIteratorHelper(i.querySelectorAll('[data-panzoom-action="toggleZoom"],[data-panzoom-action="iterateZoom"]'));try{for(y.s();!(m=y.n()).done;){var b=m.value,w=(u||h?(b.removeAttribute("disabled"),b.removeAttribute("tabindex")):(b.setAttribute("disabled",""),b.setAttribute("tabindex","-1")),b.querySelector("g"));w&&(w.style.display=u?"":"none")}}catch(e){y.e(e)}finally{y.f()}}},{key:"panTo",value:function(e){var t=e.x,t=void 0===t?this.target.e:t,i=e.y,i=void 0===i?this.target.f:i,n=e.scale,n=void 0===n?this.targetScale:n,a=e.friction,a=void 0===a?this.option("friction"):a,o=e.angle,s=e.originX,r=e.originY,l=e.flipX,c=e.flipY,e=e.ignoreBounds;this.state!==y.Destroy&&this.applyChange({panX:t-this.target.e,panY:i-this.target.f,scale:n/this.targetScale,angle:void 0===o?0:o,originX:void 0===s?0:s,originY:void 0===r?0:r,friction:a,flipX:void 0!==l&&l,flipY:void 0!==c&&c,ignoreBounds:void 0!==e&&e})}},{key:"applyChange",value:function(e){var t=e.panX,t=void 0===t?0:t,i=e.panY,i=void 0===i?0:i,n=e.scale,n=void 0===n?1:n,a=e.angle,a=void 0===a?0:a,o=e.originX,o=void 0===o?-this.current.e:o,s=e.originY,s=void 0===s?-this.current.f:s,r=e.friction,r=void 0===r?this.option("friction"):r,l=e.flipX,l=void 0!==l&&l,c=e.flipY,c=void 0!==c&&c,u=e.ignoreBounds,u=void 0!==u&&u,e=e.bounce,e=void 0===e?this.option("bounce"):e;if(this.state!==y.Destroy){this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.friction=r||0,this.ignoreBounds=u;var h,r=this.current,d=r.e,r=r.f,f=this.getMatrix(this.target),p=(new DOMMatrix).translate(d,r).translate(o,s).translate(t,i);this.option("zoom")&&(u||(t=this.targetScale,i=this.minScale,(h=this.maxScale)<t*(n=t*n<i?i/t:n)&&(n=h/t)),p=p.scale(n)),p=p.translate(-o,-s).translate(-d,-r).multiply(f),a&&(p=p.rotate(a)),l&&(p=p.scale(-1,1)),c&&(p=p.scale(1,-1));for(var v=0,g=T;v<g.length;v++){var m=g[v];"e"!==m&&"f"!==m&&(p[m]>this.minScale+1e-5||p[m]<this.minScale-1e-5)?this.target[m]=p[m]:this.target[m]=P(p[m],1e3)}(this.targetScale<this.scale||.1<Math.abs(n-1)||this.panMode===x||!1===e)&&!u&&this.clampTargetBounds(),this.isResting||(this.state=y.Panning,this.requestTick())}}},{key:"stop",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];if(this.state!==y.Init&&this.state!==y.Destroy){var t=this.isTicking;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.isBouncingX=!1,this.isBouncingY=!1;for(var i=0,n=T;i<n.length;i++){var a=n[i];this.velocity[a]=0,"current"===e?this.current[a]=this.target[a]:"target"===e&&(this.target[a]=this.current[a])}this.setTransform(),v(this.container,"is-scaling"),v(this.container,"is-animating"),this.isTicking=!1,this.state=y.Ready,t&&(this.emit("endAnimation"),this.updateControls())}}},{key:"requestTick",value:function(){var e=this;this.isTicking||(this.emit("startAnimation"),this.updateControls(),O(this.container,"is-animating"),this.isScaling&&O(this.container,"is-scaling")),this.isTicking=!0,this.rAF||(this.rAF=requestAnimationFrame(function(){return e.animate()}))}},{key:"panWithMouse",value:function(e){var t,i,n,a,o,s,r,l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.option("mouseMoveFriction");this.pmme=e,this.panMode!==x||!e||P(this.targetScale)<=P(this.minScale)||(this.emit("mouseMove",e),o=this.container,n=this.containerRect,t=this.contentRect,i=n.width,n=n.height,o=o.getBoundingClientRect(),r=(e.clientX||0)-o.left,e=(e.clientY||0)-o.top,a=(o=this.calculateContentDim(this.target)).contentWidth,o=o.contentHeight,1<(s=this.option("mouseMoveFactor"))&&(a!==i&&(a*=s),o!==n)&&(o*=s),s=.5*(a-i)-r/i*100/100*(a-i),s+=.5*(t.right-t.left),r=.5*(o-n)-e/n*100/100*(o-n),r+=.5*(t.bottom-t.top),this.applyChange({panX:s-this.target.e,panY:r-this.target.f,friction:l}))}},{key:"zoomWithWheel",value:function(e){var t,i,n,a,o;this.state!==y.Destroy&&this.state!==y.Init&&((t=Date.now())-this.pwt<45?e.preventDefault():(this.pwt=t,t=[-e.deltaX||0,-e.deltaY||0,-e.detail||0].reduce(function(e,t){return Math.abs(t)>Math.abs(e)?t:e}),t=Math.max(-1,Math.min(1,t)),i=this.targetScale,n=this.maxScale,a=this.minScale,o=P(o=i*(100+45*t)/100)<P(a)&&P(i)<=P(a)?(this.cwd+=Math.abs(t),a):P(o)>P(n)&&P(i)>=P(n)?(this.cwd+=Math.abs(t),n):(this.cwd=0,Math.max(Math.min(o,n),a)),this.cwd>this.option("wheelLimit")||(e.preventDefault(),P(o)!==P(i)&&this.zoomTo(o,{event:e}))))}},{key:"canZoomIn",value:function(){return this.option("zoom")&&(P(this.contentRect.width,1)<P(this.contentRect.fitWidth,1)||P(this.targetScale)<P(this.maxScale))}},{key:"canZoomOut",value:function(){return this.option("zoom")&&P(this.targetScale)>P(this.minScale)}},{key:"zoomIn",value:function(){this.zoomTo(this.targetScale*(0<arguments.length&&void 0!==arguments[0]?arguments[0]:1.25),1<arguments.length?arguments[1]:void 0)}},{key:"zoomOut",value:function(){this.zoomTo(this.targetScale*(0<arguments.length&&void 0!==arguments[0]?arguments[0]:.8),1<arguments.length?arguments[1]:void 0)}},{key:"zoomToFit",value:function(e){this.zoomTo("fit",e)}},{key:"zoomToCover",value:function(e){this.zoomTo("cover",e)}},{key:"zoomToFull",value:function(e){this.zoomTo("full",e)}},{key:"zoomToMax",value:function(e){this.zoomTo("max",e)}},{key:"toggleZoom",value:function(e){this.zoomTo(this.targetScale-this.minScale<.5*(this.fullScale-this.minScale)?"full":"fit",e)}},{key:"toggleMax",value:function(e){this.zoomTo(this.targetScale-this.minScale<.5*(this.maxScale-this.minScale)?"max":"fit",e)}},{key:"toggleCover",value:function(e){this.zoomTo(this.targetScale-this.minScale<.5*(this.coverScale-this.minScale)?"cover":"fit",e)}},{key:"iterateZoom",value:function(e){this.zoomTo("next",e)}},{key:"zoomTo",value:function(){var e,t,i,n,a,o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=s.friction,r=void 0===r?"auto":r,l=s.originX,l=void 0===l?"auto":l,c=s.originY,c=void 0===c?"auto":c,s=s.event;this.isContentLoading||this.state===y.Destroy||(e=this.targetScale,this.stop(),a=1,!(s=this.panMode===x&&this.pmme||s)&&"auto"!==l&&"auto"!==c||(n=this.content.getBoundingClientRect(),i=this.container.getBoundingClientRect(),t=s?s.clientX:i.left+.5*i.width,i=s?s.clientY:i.top+.5*i.height,l=t-n.left-.5*n.width,c=i-n.top-.5*n.height),t=this.fullScale,i=this.maxScale,n=this.coverScale,a="number"==typeof o?o/e:("next"===o&&(t-n<.2&&(n=t),o=e<t-1e-5?"full":e<i-1e-5?"max":"fit"),"full"===o?t/e||1:"cover"===o?n/e||1:"max"===o?i/e||1:1/e||1),this.applyChange({scale:a,originX:l,originY:c,friction:r="auto"===r?1<a?.15:.25:r}),s&&this.panMode===x&&this.panWithMouse(s,r))}},{key:"rotateCCW",value:function(){this.applyChange({angle:-90})}},{key:"rotateCW",value:function(){this.applyChange({angle:90})}},{key:"flipX",value:function(){this.applyChange({flipX:!0})}},{key:"flipY",value:function(){this.applyChange({flipY:!0})}},{key:"fitX",value:function(){this.stop("target");var e=this.containerRect,t=this.contentRect,i=this.target;this.applyChange({panX:.5*e.width-(t.left+.5*t.fitWidth)-i.e,panY:.5*e.height-(t.top+.5*t.fitHeight)-i.f,scale:e.width/t.fitWidth/this.targetScale,originX:0,originY:0,ignoreBounds:!0})}},{key:"fitY",value:function(){this.stop("target");var e=this.containerRect,t=this.contentRect,i=this.target;this.applyChange({panX:.5*e.width-(t.left+.5*t.fitWidth)-i.e,panY:.5*e.innerHeight-(t.top+.5*t.fitHeight)-i.f,scale:e.height/t.fitHeight/this.targetScale,originX:0,originY:0,ignoreBounds:!0})}},{key:"toggleFS",value:function(){var e=this.container,t=this.cn("inFullscreen"),i=this.cn("htmlHasFullscreen"),e=(e.classList.toggle(t),e.classList.contains(t));e?(document.documentElement.classList.add(i),document.addEventListener("keydown",this.onKeydown,!0)):(document.documentElement.classList.remove(i),document.removeEventListener("keydown",this.onKeydown,!0)),this.updateMetrics(),this.emit(e?"enterFS":"exitFS")}},{key:"getMatrix",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.current,t=e.a,i=e.b,n=e.c,a=e.d,o=e.e,e=e.f;return new DOMMatrix([t,i,n,a,o,e])}},{key:"reset",value:function(e){if(this.state!==y.Init&&this.state!==y.Destroy){this.stop("current");for(var t=0,i=T;t<i.length;t++){var n=i[t];this.target[n]=g[n]}this.target.a=this.minScale,this.target.d=this.minScale,this.clampTargetBounds(),this.isResting||(this.friction=void 0===e?this.option("friction"):e,this.state=y.Panning,this.requestTick())}}},{key:"destroy",value:function(){this.stop(),this.state=y.Destroy,this.detachEvents(),this.detachObserver();for(var e=this.container,t=this.content,i=this.option("classes")||{},n=0,a=Object.values(i);n<a.length;n++){var o=a[n];e.classList.remove(o+"")}t&&(t.removeEventListener("load",this.onLoad),t.removeEventListener("error",this.onError)),this.detachPlugins()}}]),o}(),a=(Object.defineProperty(f,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(f,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:{}}),(i=b=b||{})[i.Init=0]="Init",i[i.Ready=1]="Ready",i[i.Destroy=2]="Destroy",function(){_inherits(n,e);var i=_createSuper(n);function n(e,t){return _classCallCheck(this,n),t=i.call(this,t),Object.defineProperty(_assertThisInitialized(t),"instance",{enumerable:!0,configurable:!0,writable:!0,value:e}),t}return _createClass(n,[{key:"attach",value:function(){}},{key:"detach",value:function(){}}]),n}()),i=function(){_inherits(i,a);var t=_createSuper(i);function i(){var e;return _classCallCheck(this,i),e=t.apply(this,arguments),Object.defineProperty(_assertThisInitialized(e),"isDynamic",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(_assertThisInitialized(e),"list",{enumerable:!0,configurable:!0,writable:!0,value:null}),e}return _createClass(i,[{key:"onRefresh",value:function(){this.refresh()}},{key:"build",value:function(){var e=this.list;return e||(e=document.createElement("ul"),O(e,this.cn("list")),e.setAttribute("role","tablist"),this.instance.container.appendChild(e),O(this.instance.container,this.cn("hasDots")),this.list=e),e}},{key:"refresh",value:function(){var e,t=this.instance.pages.length,i=Math.min(2,this.option("minCount")),n=Math.max(2e3,this.option("maxCount")),a=this.option("dynamicFrom");if(t<i||n<t)this.cleanup();else{var i="number"==typeof a&&5<t&&a<=t,n=!this.list||this.isDynamic!==i||this.list.children.length!==t,o=(n&&this.cleanup(),this.build());if(k(o,this.cn("isDynamic"),!!i),n)for(var s=0;s<t;s++)o.append(this.createItem(s));for(var r=0,l=0,c=_toConsumableArray(o.children);l<c.length;l++){var u=c[l],h=r===this.instance.page;h&&(p=u),k(u,this.cn("isCurrent"),h),null!=(e=u.children[0])&&e.setAttribute("aria-selected",h?"true":"false");for(var d=0,f=["isBeforePrev","isPrev","isNext","isAfterNext"];d<f.length;d++)v(u,this.cn(f[d]));r++}var p=p||o.firstChild;i&&p&&(n=(a=p.previousElementSibling)&&a.previousElementSibling,O(a,this.cn("isPrev")),O(n,this.cn("isBeforePrev")),n=(a=p.nextElementSibling)&&a.nextElementSibling,O(a,this.cn("isNext")),O(n,this.cn("isAfterNext"))),this.isDynamic=i}}},{key:"createItem",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=document.createElement("li"),e=(t.setAttribute("role","presentation"),m(this.instance.localize(this.option("dotTpl"),[["%d",e+1]]).replace(/\%i/g,e+"")));return t.appendChild(e),null!=(e=t.children[0])&&e.setAttribute("role","tab"),t}},{key:"cleanup",value:function(){this.list&&(this.list.remove(),this.list=null),this.isDynamic=!1,v(this.instance.container,this.cn("hasDots"))}},{key:"attach",value:function(){this.instance.on(["refresh","change"],this.onRefresh)}},{key:"detach",value:function(){this.instance.off(["refresh","change"],this.onRefresh),this.cleanup()}}]),i}(),te=(Object.defineProperty(i,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{classes:{list:"f-carousel__dots",isDynamic:"is-dynamic",hasDots:"has-dots",dot:"f-carousel__dot",isBeforePrev:"is-before-prev",isPrev:"is-prev",isCurrent:"is-current",isNext:"is-next",isAfterNext:"is-after-next"},dotTpl:'<button type="button" data-carousel-page="%i" aria-label="{{GOTO}}"><span class="f-carousel__dot" aria-hidden="true"></span></button>',dynamicFrom:11,maxCount:1/0,minCount:2}}),"disabled"),ie="next",n=function(){_inherits(i,a);var t=_createSuper(i);function i(){var e;return _classCallCheck(this,i),e=t.apply(this,arguments),Object.defineProperty(_assertThisInitialized(e),"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(_assertThisInitialized(e),"prev",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(_assertThisInitialized(e),"next",{enumerable:!0,configurable:!0,writable:!0,value:null}),e}return _createClass(i,[{key:"onRefresh",value:function(){var e,t,i=this.instance,n=i.pages.length,a=i.page;n<2?this.cleanup():(this.build(),e=this.prev,t=this.next,e&&t&&(e.removeAttribute(te),t.removeAttribute(te),i.isInfinite||(a<=0&&e.setAttribute(te,""),n-1<=a&&t.setAttribute(te,""))))}},{key:"createButton",value:function(e){var t=this.instance,i=document.createElement("button"),n=(i.setAttribute("tabindex","0"),i.setAttribute("title",t.localize("{{".concat(e.toUpperCase(),"}}"))),O(i,this.cn("button")+" "+this.cn(e===ie?"isNext":"isPrev")),t.isRTL?e===ie?"prev":ie:e);return i.innerHTML=t.localize(this.option("".concat(n,"Tpl"))),i.dataset["carousel".concat((t=e)?t.match("^[a-z]")?t.charAt(0).toUpperCase()+t.substring(1):t:"")]="true",i}},{key:"build",value:function(){var e=this.container;e||(this.container=e=document.createElement("div"),O(e,this.cn("container")),this.instance.container.appendChild(e)),this.next||(this.next=e.appendChild(this.createButton(ie))),this.prev||(this.prev=e.appendChild(this.createButton("prev")))}},{key:"cleanup",value:function(){this.prev&&this.prev.remove(),this.next&&this.next.remove(),this.container&&this.container.remove(),this.prev=null,this.next=null,this.container=null}},{key:"attach",value:function(){this.instance.on(["refresh","change"],this.onRefresh)}},{key:"detach",value:function(){this.instance.off(["refresh","change"],this.onRefresh),this.cleanup()}}]),i}(),o=(Object.defineProperty(n,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{classes:{container:"f-carousel__nav",button:"f-button",isNext:"is-next",isPrev:"is-prev"},nextTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M9 3l9 9-9 9"/></svg>',prevTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M15 3l-9 9 9 9"/></svg>'}}),function(){_inherits(i,a);var t=_createSuper(i);function i(){var e;return _classCallCheck(this,i),e=t.apply(this,arguments),Object.defineProperty(_assertThisInitialized(e),"selectedIndex",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(_assertThisInitialized(e),"target",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(_assertThisInitialized(e),"nav",{enumerable:!0,configurable:!0,writable:!0,value:null}),e}return _createClass(i,[{key:"addAsTargetFor",value:function(e){this.target=this.instance,this.nav=e,this.attachEvents()}},{key:"addAsNavFor",value:function(e){this.nav=this.instance,this.target=e,this.attachEvents()}},{key:"attachEvents",value:function(){this.nav&&this.target&&(this.nav.options.initialSlide=this.target.options.initialPage,this.nav.on("ready",this.onNavReady),this.nav.state===b.Ready&&this.onNavReady(this.nav),this.target.on("ready",this.onTargetReady),this.target.state===b.Ready)&&this.onTargetReady(this.target)}},{key:"onNavReady",value:function(e){e.on("createSlide",this.onNavCreateSlide),e.on("Panzoom.click",this.onNavClick),e.on("Panzoom.touchEnd",this.onNavTouch),this.onTargetChange()}},{key:"onTargetReady",value:function(e){e.on("change",this.onTargetChange),e.on("Panzoom.refresh",this.onTargetChange),this.onTargetChange()}},{key:"onNavClick",value:function(e,t,i){this.onNavTouch(e,e.panzoom,i)}},{key:"onNavTouch",value:function(e,t,i){var n,a,o;3<Math.abs(t.dragOffset.x)||3<Math.abs(t.dragOffset.y)||(t=i.target,n=this.nav,a=this.target,n&&a&&t&&(t=t.closest("[data-index]"),i.stopPropagation(),i.preventDefault(),t)&&(i=parseInt(t.dataset.index||"",10)||0,t=a.getPageForSlide(i),o=n.getPageForSlide(i),n.slideTo(o),a.slideTo(t,{friction:(null==(o=null==(n=this.nav)?void 0:n.plugins)?void 0:o.Sync.option("friction"))||0}),this.markSelectedSlide(i)))}},{key:"onNavCreateSlide",value:function(e,t){t.index===this.selectedIndex&&this.markSelectedSlide(t.index)}},{key:"onTargetChange",value:function(){var e,t=this.target,i=this.nav;t&&i&&i.state===b.Ready&&t.state===b.Ready&&(t=t.pages[t.page].slides[0].index,e=i.getPageForSlide(t),this.markSelectedSlide(t),i.slideTo(e))}},{key:"markSelectedSlide",value:function(t){var e=this.nav;e&&e.state===b.Ready&&(this.selectedIndex=t,_toConsumableArray(e.slides).map(function(e){e.el&&e.el.classList[e.index===t?"add":"remove"]("is-nav-selected")}))}},{key:"attach",value:function(){var e=this.options.target,t=this.options.nav;e?this.addAsNavFor(e):t&&this.addAsTargetFor(t)}},{key:"detach",value:function(){var e=this,t=e.nav,i=e.target;t&&(t.off("ready",e.onNavReady),t.off("createSlide",e.onNavCreateSlide),t.off("Panzoom.click",e.onNavClick),t.off("Panzoom.touchEnd",e.onNavTouch)),e.nav=null,i&&(i.off("ready",e.onTargetReady),i.off("refresh",e.onTargetChange),i.off("change",e.onTargetChange)),e.target=null}}]),i}()),n=(Object.defineProperty(o,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{friction:.35}}),{Navigation:n,Dots:i,Sync:o}),r=function(){_inherits(l,J);var a=_createSuper(l);function l(e){var t,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(_classCallCheck(this,l),t=a.call(this),Object.defineProperty(_assertThisInitialized(t),"userOptions",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(_assertThisInitialized(t),"userPlugins",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(_assertThisInitialized(t),"bp",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(_assertThisInitialized(t),"lp",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(_assertThisInitialized(t),"state",{enumerable:!0,configurable:!0,writable:!0,value:b.Init}),Object.defineProperty(_assertThisInitialized(t),"page",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(_assertThisInitialized(t),"prevPage",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(_assertThisInitialized(t),"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(_assertThisInitialized(t),"viewport",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(_assertThisInitialized(t),"track",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(_assertThisInitialized(t),"slides",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(_assertThisInitialized(t),"pages",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(_assertThisInitialized(t),"panzoom",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(_assertThisInitialized(t),"inTransition",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(_assertThisInitialized(t),"contentDim",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(_assertThisInitialized(t),"viewportDim",{enumerable:!0,configurable:!0,writable:!0,value:0}),(e="string"==typeof e?document.querySelector(e):e)&&u(e))return t.container=e,t.slideNext=q(t.slideNext.bind(_assertThisInitialized(t)),150),t.slidePrev=q(t.slidePrev.bind(_assertThisInitialized(t)),150),t.userOptions=i,t.userPlugins=n,queueMicrotask(function(){t.processOptions()}),_possibleConstructorReturn(t);throw new Error("No Element found")}return _createClass(l,[{key:"axis",get:function(){return this.isHorizontal?"e":"f"}},{key:"isEnabled",get:function(){return this.state===b.Ready}},{key:"isInfinite",get:function(){var e=!1,t=this.contentDim,i=this.viewportDim,n=this.pages,a=this.slides;return e=2<=n.length&&t+a[0].dim>=i?this.option("infinite"):e}},{key:"isRTL",get:function(){return"rtl"===this.option("direction")}},{key:"isHorizontal",get:function(){return"x"===this.option("axis")}},{key:"processOptions",value:function(){var e=this,t=p({},l.defaults,this.userOptions),i="",n=t.breakpoints;if(n&&X(n))for(var a=0,o=Object.entries(n);a<o.length;a++){var s=_slicedToArray(o[a],2),r=s[0],s=s[1];window.matchMedia(r).matches&&X(s)&&(i+=r,p(t,s))}i===this.bp&&this.state!==b.Init||(this.bp=i,this.state===b.Ready&&(t.initialSlide=this.pages[this.page].slides[0].index),this.state!==b.Init&&this.destroy(),_get(_getPrototypeOf(l.prototype),"setOptions",this).call(this,t),!1===this.option("enabled")?this.attachEvents():setTimeout(function(){e.init()},0))}},{key:"init",value:function(){this.state=b.Init,this.emit("init"),this.attachPlugins(Object.assign(Object.assign({},l.Plugins),this.userPlugins)),this.initLayout(),this.initSlides(),this.updateMetrics(),this.setInitialPosition(),this.initPanzoom(),this.attachEvents(),this.state=b.Ready,this.emit("ready")}},{key:"initLayout",value:function(){var e=this.container,t=this.option("classes"),i=(O(e,this.cn("container")),k(e,t.isLTR,!this.isRTL),k(e,t.isRTL,this.isRTL),k(e,t.isVertical,!this.isHorizontal),k(e,t.isHorizontal,this.isHorizontal),this.option("viewport")||e.querySelector(".".concat(t.viewport))),e=(i||(i=document.createElement("div"),O(i,t.viewport),i.append.apply(i,_toConsumableArray(V(e,".".concat(t.slide)))),e.prepend(i)),this.option("track")||e.querySelector(".".concat(t.track)));e||(e=document.createElement("div"),O(e,t.track),e.append.apply(e,_toConsumableArray(Array.from(i.childNodes)))),e.setAttribute("aria-live","polite"),i.contains(e)||i.prepend(e),this.viewport=i,this.track=e,this.emit("initLayout")}},{key:"initSlides",value:function(){var t=this,e=this.track;if(e){this.slides=[],_toConsumableArray(V(e,".".concat(this.cn("slide")))).forEach(function(e){u(e)&&(e=s({el:e,isDom:!0,index:t.slides.length}),t.slides.push(e),t.emit("initSlide",e,t.slides.length))});var i,n=_createForOfIteratorHelper(this.option("slides",[]));try{for(n.s();!(i=n.n()).done;){var a=i.value,o=s(a);o.index=this.slides.length,this.slides.push(o),this.emit("initSlide",o,this.slides.length)}}catch(e){n.e(e)}finally{n.f()}this.emit("initSlides")}}},{key:"setInitialPage",value:function(){var e=this.option("initialSlide"),e="number"==typeof e?this.getPageForSlide(e):parseInt(this.option("initialPage",0)+"",10)||0;this.page=e}},{key:"setInitialPosition",value:function(){var e,t,i;this.track&&this.pages.length&&(i=this.isHorizontal,e=this.page,this.pages[e]||(this.page=e=0),e=this.pages[e].pos*(this.isRTL&&i?1:-1),t=i?"".concat(e,"px"):"0",i=i?"0":"".concat(e,"px"),this.track.style.transform="translate3d(".concat(t,", ").concat(i,", 0) scale(1)"),this.option("adaptiveHeight"))&&this.setViewportHeight()}},{key:"initPanzoom",value:function(){var o=this,e=(this.panzoom&&(this.panzoom.destroy(),this.panzoom=null),this.option("Panzoom")||{});this.panzoom=new f(this.viewport,p({},{content:this.track,zoom:!1,panOnlyZoomed:!1,lockAxis:this.isHorizontal?"x":"y",infinite:this.isInfinite,click:!1,dblClick:!1,touch:function(e){return!(o.pages.length<2&&!e.options.infinite)},bounds:function(){return o.getBounds()},maxVelocity:function(e){return Math.abs(e.target[o.axis]-e.current[o.axis])<2*o.viewportDim?100:0}},e)),this.panzoom.on("*",function(e,t){for(var i=arguments.length,n=new Array(2<i?i-2:0),a=2;a<i;a++)n[a-2]=arguments[a];o.emit.apply(o,["Panzoom.".concat(t),e].concat(n))}),this.panzoom.on("decel",this.onDecel),this.panzoom.on("refresh",this.onRefresh),this.panzoom.on("beforeTransform",this.onBeforeTransform),this.panzoom.on("endAnimation",this.onEndAnimation)}},{key:"attachEvents",value:function(){var e=this.container;e&&(e.addEventListener("click",this.onClick,{passive:!1,capture:!1}),e.addEventListener("slideTo",this.onSlideTo)),window.addEventListener("resize",this.onResize)}},{key:"createPages",value:function(){var e,t=[],i=this.contentDim,n=this.viewportDim,a=this.option("slidesPerPage"),o=(("number"!=typeof a||i<=n)&&(a=1/0),0),s=0,r=0,l=_createForOfIteratorHelper(this.slides);try{for(l.s();!(e=l.n()).done;){var c=e.value;(!t.length||s+c.dim>n||r===a)&&(t.push(function(){return Object.assign({index:-1,slides:[],dim:0,pos:-1},0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})}()),o=t.length-1,r=s=0),t[o].slides.push(c),s+=c.dim+c.gap,r++}}catch(e){l.e(e)}finally{l.f()}return t}},{key:"processPages",value:function(){var t,i,n=this,e=this.pages,r=this.contentDim,l=this.viewportDim,c=this.option("center"),a=this.option("fill"),u=a&&c&&l<r&&!this.isInfinite;return e.forEach(function(e,t){e.index=t,e.pos=e.slides[0].pos,e.dim=0;var i,n=_createForOfIteratorHelper(e.slides.entries());try{for(n.s();!(i=n.n()).done;){var a=_slicedToArray(i.value,2),o=a[0],s=a[1];e.dim+=s.dim,o<e.slides.length-1&&(e.dim+=s.gap)}}catch(e){n.e(e)}finally{n.f()}u&&e.pos+.5*e.dim<.5*l?e.pos=0:u&&e.pos+.5*e.dim>=r-.5*l?e.pos=r-l:c&&(e.pos+=-.5*(l-e.dim))}),e.forEach(function(e,t){a&&!n.isInfinite&&l<r&&(e.pos=Math.max(e.pos,0),e.pos=Math.min(e.pos,r-l)),e.pos=P(e.pos,1e3),e.dim=P(e.dim,1e3),Math.abs(e.pos)<=.1&&(e.pos=0)}),this.isInfinite?e:(t=[],e.forEach(function(e){e=Object.assign({},e);i&&e.pos===i.pos?(i.dim+=e.dim,i.slides=[].concat(_toConsumableArray(i.slides),_toConsumableArray(e.slides))):(e.index=t.length,i=e,t.push(e))}),t)}},{key:"getPageFromIndex",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=this.pages.length,e=parseInt((e||0).toString())||0;return this.isInfinite?(e%t+t)%t:Math.max(Math.min(e,t-1),0)}},{key:"getSlideMetrics",value:function(e){var t,i=this.isHorizontal?"width":"height",n=0,a=e.el,o=a&&!a.parentNode,i=(a?n=parseFloat(a.dataset[i]||"")||0:((a=document.createElement("div")).style.visibility="hidden",(this.track||document.body).prepend(a)),O(a,this.cn("slide")+" "+e.class+" "+e.customClass),n?(a.style[i]="".concat(n,"px"),a.style["width"==i?"height":"width"]=""):(o&&(this.track||document.body).prepend(a),t=Math.max(1,(null==(t=window.visualViewport)?void 0:t.scale)||1),n=a.getBoundingClientRect()[i]*t),getComputedStyle(a));return"content-box"===i.boxSizing&&(this.isHorizontal?n=(n+=parseFloat(i.paddingLeft)||0)+(parseFloat(i.paddingRight)||0):n=(n+=parseFloat(i.paddingTop)||0)+(parseFloat(i.paddingBottom)||0)),t=parseFloat(i[this.isHorizontal?"marginRight":"marginBottom"])||0,o?null!=(i=a.parentElement)&&i.removeChild(a):e.el||a.remove(),{dim:P(n,1e3),gap:P(t,1e3)}}},{key:"getBounds",value:function(){var e=this.isInfinite,t=this.isRTL,i=this.isHorizontal,n=this.pages,a={min:0,max:0};return e?a={min:-1/0,max:1/0}:n.length&&(e=n[0].pos,n=n[n.length-1].pos,a=t&&i?{min:e,max:n}:{min:-1*n,max:-1*e}),{x:i?a:{min:0,max:0},y:i?{min:0,max:0}:a}}},{key:"repositionSlides",value:function(){var e,t,i=this.isHorizontal,n=this.isRTL,a=this.isInfinite,o=this.viewport,s=this.viewportDim,r=this.contentDim,l=this.page,c=this.pages,u=this.slides,h=this.panzoom,d=0,f=0,p=0,v=0,g=(h?v=-1*h.current[this.axis]:c[l]&&(v=c[l].pos||0),e=i?n?"right":"left":"top",n&&i&&(v*=-1),_createForOfIteratorHelper(u));try{for(g.s();!(t=g.n()).done;){var m=t.value;m.el?("top"==e?(m.el.style.right="",m.el.style.left=""):m.el.style.top="",m.index!==d?m.el.style[e]=0===f?"":"".concat(P(f,1e3),"px"):m.el.style[e]="",p+=m.dim+m.gap,d++):f+=m.dim+m.gap}}catch(e){g.e(e)}finally{g.f()}if(a&&p&&o){var y,h=getComputedStyle(o),l="padding",n=i?"Right":"Bottom",a=parseFloat(h[l+(i?"Left":"Top")]),b=(v-=a,s=(s+=a)+parseFloat(h[l+n]),_createForOfIteratorHelper(u));try{for(b.s();!(y=b.n()).done;){var w=y.value;w.el&&(P(w.pos)<P(s)&&P(w.pos+w.dim+w.gap)<P(v)&&P(v)>P(r-s)&&(w.el.style[e]="".concat(P(f+p,1e3),"px")),P(w.pos+w.gap)>=P(r-s))&&P(w.pos)>P(v+s)&&P(v)<P(s)&&(w.el.style[e]="-".concat(P(p,1e3),"px"))}}catch(e){b.e(e)}finally{b.f()}}var k,T,o=_toConsumableArray(this.inTransition);if(1<o.length&&(k=c[o[0]],T=c[o[1]]),k&&T){var x,C=0,S=_createForOfIteratorHelper(u);try{for(S.s();!(x=S.n()).done;){var E=x.value;E.el?this.inTransition.has(E.index)&&k.slides.indexOf(E)<0&&(E.el.style[e]="".concat(P(C+(k.pos-T.pos),1e3),"px")):C+=E.dim+E.gap}}catch(e){S.e(e)}finally{S.f()}}}},{key:"createSlideEl",value:function(e){var t,i,n,a,o=this.track,s=this.slides;o&&e&&(e.el&&e.el.parentNode||(t=e.el||document.createElement("div"),O(t,this.cn("slide")),O(t,e.class),O(t,e.customClass),(a=e.html)&&(a instanceof HTMLElement?t.appendChild(a):t.innerHTML=e.html+""),i=[],s.forEach(function(e,t){e.el&&i.push(t)}),n=e.index,a=null,s=(a=i.length?s[i.reduce(function(e,t){return Math.abs(t-n)<Math.abs(e-n)?t:e})]:a)&&a.el&&a.el.parentNode?a.index<e.index?a.el.nextSibling:a.el:null,o.insertBefore(t,o.contains(s)?s:null),e.el=t,this.emit("createSlide",e)))}},{key:"removeSlideEl",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],i=e.el;i&&i.parentNode&&(v(i,this.cn("isSelected")),e.isDom&&!t?(i.removeAttribute("aria-hidden"),i.removeAttribute("data-index"),v(i,this.cn("isSelected")),i.style.left=""):(this.emit("removeSlide",e),t=new CustomEvent("animationend"),i.dispatchEvent(t),e.el&&(e.el.remove(),e.el=null)))}},{key:"transitionTo",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.option("transition");if(!t)return!1;var i=this.pages,n=this.panzoom,e=parseInt((e||0).toString())||0,a=this.getPageFromIndex(e);if(!n||!i[a]||i.length<2||1<Math.abs(i[this.page].slides[0].dim-this.viewportDim))return!1;i=e>this.page?1:-1,e=this.pages[a].pos*(this.isRTL?1:-1);if(this.page===a&&Math.abs(e-n.target[this.axis])<1)return!1;this.clearTransitions();var o=n.isResting,s=(O(this.container,this.cn("inTransition")),this.pages[this.page].slides[0]),r=this.pages[a].slides[0],l=(this.inTransition.add(r.index),this.createSlideEl(r),s.el),c=r.el,o=(o||"slide"===t||(t="fadeFast",l=null),this.isRTL?"next":"prev"),u=this.isRTL?"prev":"next";return l&&(this.inTransition.add(s.index),s.transition=t,l.addEventListener("animationend",this.onAnimationEnd),l.classList.add("f-".concat(t,"Out"),"to-".concat(0<i?u:o))),c&&(r.transition=t,c.addEventListener("animationend",this.onAnimationEnd),c.classList.add("f-".concat(t,"In"),"from-".concat(0<i?o:u))),n.panTo({x:this.isHorizontal?e:0,y:this.isHorizontal?0:e,friction:0}),this.onChange(a),!0}},{key:"manageSlideVisiblity",value:function(){var e,t=new Set,i=new Set,n=this.getVisibleSlides(parseFloat(this.option("preload",0)+"")||0),a=_createForOfIteratorHelper(this.slides);try{for(a.s();!(e=a.n()).done;){var o=e.value;(n.has(o)?t:i).add(o)}}catch(e){a.e(e)}finally{a.f()}var s,r=_createForOfIteratorHelper(this.inTransition);try{for(r.s();!(s=r.n()).done;){var l=s.value;t.add(this.slides[l])}}catch(e){r.e(e)}finally{r.f()}var c,u=_createForOfIteratorHelper(t);try{for(u.s();!(c=u.n()).done;){var h=c.value;this.createSlideEl(h),this.lazyLoadSlide(h)}}catch(e){u.e(e)}finally{u.f()}var d,f=_createForOfIteratorHelper(i);try{for(f.s();!(d=f.n()).done;){var p=d.value;t.has(p)||this.removeSlideEl(p)}}catch(e){f.e(e)}finally{f.f()}this.markSelectedSlides(),this.repositionSlides()}},{key:"markSelectedSlides",value:function(){if(this.pages[this.page]&&this.pages[this.page].slides){var e="aria-hidden",t=this.cn("isSelected");if(t){var i,n=_createForOfIteratorHelper(this.slides);try{for(n.s();!(i=n.n()).done;){var a=i.value;a.el&&(a.el.dataset.index="".concat(a.index),this.pages[this.page].slides.includes(a)?(a.el.classList.contains(t)||(O(a.el,t),this.emit("selectSlide",a)),a.el.removeAttribute(e)):(a.el.classList.contains(t)&&(v(a.el,t),this.emit("unselectSlide",a)),a.el.setAttribute(e,"true")))}}catch(e){n.e(e)}finally{n.f()}}}}},{key:"flipInfiniteTrack",value:function(){var e,t,i,n,a,o,s=this.panzoom;s&&this.isInfinite&&(e="x"===this.option("axis")?"e":"f",o=this.viewportDim,t=this.contentDim,i=s.current[e],n=s.target[e]-i,a=0,o=.5*o,this.isRTL&&this.isHorizontal?(i<-o&&(a=-1,i+=t),t-o<i&&(a=1,i-=t)):(o<i&&(a=1,i-=t),i<o-t&&(a=-1,i+=t)),a)&&(s.current[e]=i,s.target[e]=i+n)}},{key:"lazyLoadSlide",value:function(i){var n=this,a=this,e=i&&i.el;if(e){var o,t=new Set,s="f-fadeIn",r=(e.querySelectorAll("[data-lazy-srcset]").forEach(function(e){e instanceof HTMLImageElement&&t.add(e)}),Array.from(e.querySelectorAll("[data-lazy-src]"))),l=(e.dataset.lazySrc&&r.push(e),r.map(function(e){e instanceof HTMLImageElement?t.add(e):u(e)&&(e.style.backgroundImage="url('".concat(e.dataset.lazySrc||"","')"),delete e.dataset.lazySrc)}),function(e,t,i){i&&(i.remove(),i=null),t.complete&&(t.classList.add(s),setTimeout(function(){t.classList.remove(s)},350),t.style.display=""),n.option("adaptiveHeight")&&e.el&&-1<n.pages[n.page].slides.indexOf(e)&&(a.updateMetrics(),a.setViewportHeight()),n.emit("load",e)}),c=_createForOfIteratorHelper(t);try{for(c.s();!(o=c.n()).done;)!function(){var e=o.value,t=null;e.src=e.dataset.lazySrcset||e.dataset.lazySrc||"",delete e.dataset.lazySrc,delete e.dataset.lazySrcset,e.style.display="none",e.addEventListener("error",function(){l(i,e,t)}),e.addEventListener("load",function(){l(i,e,t)}),setTimeout(function(){e.parentNode&&i.el&&(e.complete?l(i,e,t):(t=m(h),e.parentNode.insertBefore(t,e)))},300)}()}catch(e){c.e(e)}finally{c.f()}}}},{key:"onAnimationEnd",value:function(e){var t=e.target,i=t?parseInt(t.dataset.index||"",10)||0:-1,n=this.slides[i],e=e.animationName;t&&n&&e&&((t=!!this.inTransition.has(i)&&n.transition)&&e.substring(0,t.length+2)==="f-".concat(t)&&this.inTransition.delete(i),this.inTransition.size||this.clearTransitions(),i===this.page)&&null!=(n=this.panzoom)&&n.isResting&&this.emit("settle")}},{key:"onDecel",value:function(e){var t,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,s=this.isRTL,r=this.isHorizontal,l=this.axis,c=this.pages,u=c.length,h=Math.abs(Math.atan2(n,i)/(Math.PI/180)),h=45<h&&h<135?r?0:n:r?i:0;u&&(n=this.option("dragFree"),i=this.page,t=e.target[l]*(u=s&&r?1:-1),l=e.current[l]*u,u=this.getPageFromPosition(t).pageIndex,t=this.getPageFromPosition(l).pageIndex,n?this.onChange(u):(i=5<Math.abs(h)?(c[i].dim<document.documentElement["client"+(this.isHorizontal?"Width":"Height")]-1&&(i=t),s&&r?h<0?i-1:i+1:h<0?i+1:i-1):0===a&&0===o?i:t,this.slideTo(i,{transition:!1,friction:e.option("decelFriction")})))}},{key:"onClick",value:function(e){var t,i,n=e.target,a=n&&u(n)?n.dataset:null;a&&(void 0!==a.carouselPage?(i="slideTo",t=a.carouselPage):void 0!==a.carouselNext?i="slideNext":void 0!==a.carouselPrev&&(i="slidePrev")),i?(e.preventDefault(),e.stopPropagation(),n&&!n.hasAttribute("disabled")&&this[i](t)):this.emit("click",e)}},{key:"onSlideTo",value:function(e){e=e.detail||0;this.slideTo(this.getPageForSlide(e),{friction:0})}},{key:"onChange",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,i=this.page;this.prevPage=i,this.page=e,this.option("adaptiveHeight")&&this.setViewportHeight(),e!==i&&(this.markSelectedSlides(),this.emit("change",e,i,t))}},{key:"onRefresh",value:function(){var e=this.contentDim,t=this.viewportDim;this.updateMetrics(),this.contentDim===e&&this.viewportDim===t||this.slideTo(this.page,{friction:0,transition:!1})}},{key:"onResize",value:function(){this.option("breakpoints")&&this.processOptions()}},{key:"onBeforeTransform",value:function(e){this.lp!==e.current[this.axis]&&(this.flipInfiniteTrack(),this.manageSlideVisiblity()),this.lp=e.current.e}},{key:"onEndAnimation",value:function(){this.inTransition.size||this.emit("settle")}},{key:"reInit",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;this.destroy(),this.state=b.Init,this.userOptions=e||this.userOptions,this.userPlugins=t||this.userPlugins,this.processOptions()}},{key:"slideTo",value:function(){var e,t,i,n,a,o,s,r,l,c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,u=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},h=u.friction,h=void 0===h?this.option("friction"):h,u=u.transition,u=void 0===u?this.option("transition"):u;this.state!==b.Destroy&&(e=this.axis,t=this.isHorizontal,a=this.isRTL,l=this.pages,i=this.panzoom,n=l.length,a=a&&t?1:-1,i)&&n&&(this.transitionTo(c,u)||(l=l[u=this.getPageFromIndex(c)].pos,this.isInfinite&&(o=this.contentDim,s=i.target[e]*a,2===n?l+=o*Math.floor(parseFloat(c+"")/2):(r=s,l=[l,l-o,l+o].reduce(function(e,t){return Math.abs(t-r)<Math.abs(e-r)?t:e}))),l*=a,Math.abs(i.target[e]-l)<.1)||(i.panTo({x:t?l:0,y:t?0:l,friction:h}),this.onChange(u)))}},{key:"slideToClosest",value:function(e){var t;this.panzoom&&(t=this.getPageFromPosition(this.panzoom.current[this.isHorizontal?"e":"f"]).pageIndex,this.slideTo(t,e))}},{key:"slideNext",value:function(){this.slideTo(this.page+1)}},{key:"slidePrev",value:function(){this.slideTo(this.page-1)}},{key:"clearTransitions",value:function(){this.inTransition.clear(),v(this.container,this.cn("inTransition"));var e,t=["to-prev","to-next","from-prev","from-next"],i=_createForOfIteratorHelper(this.slides);try{for(i.s();!(e=i.n()).done;){var n,a,o=e.value,s=o.el;s&&(s.removeEventListener("animationend",this.onAnimationEnd),(n=s.classList).remove.apply(n,t),a=o.transition)&&s.classList.remove("f-".concat(a,"Out"),"f-".concat(a,"In"))}}catch(e){i.e(e)}finally{i.f()}this.manageSlideVisiblity()}},{key:"prependSlide",value:function(e){var t,e=Array.isArray(e)?e:[e],i=_createForOfIteratorHelper(e.reverse());try{for(i.s();!(t=i.n()).done;){var n=t.value;this.slides.unshift(s(n))}}catch(e){i.e(e)}finally{i.f()}for(var a=0;a<this.slides.length;a++)this.slides[a].index=a;var o=(null==(o=this.pages[this.page])?void 0:o.pos)||0,e=(this.page+=e.length,this.updateMetrics(),(null==(e=this.pages[this.page])?void 0:e.pos)||0);this.panzoom&&(e=this.isRTL?o-e:e-o,this.panzoom.target.e-=e,this.panzoom.current.e-=e,this.panzoom.requestTick())}},{key:"appendSlide",value:function(e){var t,i=_createForOfIteratorHelper(Array.isArray(e)?e:[e]);try{for(i.s();!(t=i.n()).done;){var n=t.value,a=s(n);a.index=this.slides.length,this.slides.push(a),this.emit("initSlide",a,this.slides.length)}}catch(e){i.e(e)}finally{i.f()}this.updateMetrics()}},{key:"removeSlide",value:function(e){var t=this.slides.length;this.removeSlideEl(this.slides[e=(e%t+t)%t],!0),this.slides.splice(e,1);for(var i=0;i<this.slides.length;i++)this.slides[i].index=i;this.updateMetrics(),this.slideTo(this.page,{friction:0,transition:!1})}},{key:"updateMetrics",value:function(){var e=this.panzoom,t=this.viewport,i=this.track,n=this.isHorizontal;if(i){var a,o,s,i=n?"width":"height";t&&(a=Math.max(t[n?"offsetWidth":"offsetHeight"],P(t.getBoundingClientRect()[i],1e3)),t=getComputedStyle(t),o="padding",s=n?"Right":"Bottom",a-=parseFloat(t[o+(n?"Left":"Top")])+parseFloat(t[o+s]),this.viewportDim=a);var r,l,n=this.pages.length,c=0,u=_createForOfIteratorHelper(this.slides.entries());try{for(u.s();!(l=u.n()).done;){var h,d=_slicedToArray(l.value,2),f=d[0],p=d[1],v=0,g=0;!p.el&&r?(v=r.dim,g=r.gap):(v=(h=this.getSlideMetrics(p)).dim,g=h.gap,r=p),v=P(v,1e3),g=P(g,1e3),p.dim=v,p.gap=g,p.pos=c,c+=v,(this.isInfinite||f<this.slides.length-1)&&(c+=g)}}catch(e){u.e(e)}finally{u.f()}t=this.contentDim,c=P(c,1e3);this.contentDim=c,e&&(e.contentRect[i]=c,e.contentRect["e"===this.axis?"fullWidth":"fullHeight"]=c),this.pages=this.createPages(),this.pages=this.processPages(),this.state===b.Init&&this.setInitialPage(),this.page=Math.max(0,Math.min(this.page,this.pages.length-1)),e&&n===this.pages.length&&.5<Math.abs(c-t)&&(e.target[this.axis]=-1*this.pages[this.page].pos,e.current[this.axis]=-1*this.pages[this.page].pos,e.stop()),this.manageSlideVisiblity(),this.emit("refresh")}}},{key:"getProgress",value:function(e){var t,i=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=(void 0===e&&(e=this.page),this.panzoom),e=this.pages[e]||0;return e&&n?(n=-1*n.current.e,t=this.contentDim,n=[P((n-e.pos)/+e.dim,1e3),P((n+t-e.pos)/+e.dim,1e3),P((n-t-e.pos)/+e.dim,1e3)].reduce(function(e,t){return Math.abs(t)<Math.abs(e)?t:e}),i?n:Math.max(-1,Math.min(1,n))):0}},{key:"setViewportHeight",value:function(){var t,e=this.page,i=this.pages,n=this.viewport,a=this.isHorizontal;n&&i[e]&&(t=0,a&&this.track&&(this.track.style.height="auto",i[e].slides.forEach(function(e){e.el&&(t=Math.max(t,e.el.offsetHeight))})),n.style.height=t?"".concat(t,"px"):"")}},{key:"getPageForSlide",value:function(e){var t,i=_createForOfIteratorHelper(this.pages);try{for(i.s();!(t=i.n()).done;){var n,a=t.value,o=_createForOfIteratorHelper(a.slides);try{for(o.s();!(n=o.n()).done;)if(n.value.index===e)return a.index}catch(e){o.e(e)}finally{o.f()}}}catch(e){i.e(e)}finally{i.f()}return-1}},{key:"getVisibleSlides",value:function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,i=new Set,n=this.contentDim,a=this.viewportDim,o=this.pages,s=this.page,n=n+(null==(r=this.slides[this.slides.length-1])?void 0:r.gap)||0,r=0,r=this.panzoom?-1*this.panzoom.current[this.axis]:o[s]&&o[s].pos||0,l=(this.isInfinite&&(r-=Math.floor(r/n)*n),this.isRTL&&this.isHorizontal&&(r*=-1),r-a*t),c=r+a*(t+1),u=this.isInfinite?[-1,0,1]:[0],h=_createForOfIteratorHelper(this.slides);try{for(h.s();!(e=h.n()).done;){var d,f=e.value,p=_createForOfIteratorHelper(u);try{for(p.s();!(d=p.n()).done;){var v=d.value,g=f.pos+v*n,m=f.pos+f.dim+f.gap+v*n;g<c&&l<m&&i.add(f)}}catch(e){p.e(e)}finally{p.f()}}}catch(e){h.e(e)}finally{h.f()}return i}},{key:"getPageFromPosition",value:function(i){var e=this.viewportDim,t=this.contentDim,n=this.pages.length,a=this.slides.length,a=this.slides[a-1],o=this.option("center"),e=(o&&(i+=.5*e),this.isInfinite||(i=Math.max(this.slides[0].pos,Math.min(i,a.pos))),t+a.gap),t=Math.floor(i/e)||0,s=(i-=t*e,a),e=(e=this.slides.find(function(e){var t=i+(s&&!o?.5*s.dim:0);return(s=e).pos<=t&&e.pos+e.dim+e.gap>t}))||a;return{page:(a=this.getPageForSlide(e.index))+t*n,pageIndex:a}}},{key:"destroy",value:function(){var t=this;if(![b.Destroy].includes(this.state)){this.state=b.Destroy;var e=this.container,i=this.viewport,n=this.track,a=this.slides,o=this.panzoom,s=this.option("classes");e.removeEventListener("click",this.onClick,{passive:!1,capture:!1}),e.removeEventListener("slideTo",this.onSlideTo),window.removeEventListener("resize",this.onResize),o&&(o.destroy(),this.panzoom=null),a&&a.forEach(function(e){t.removeSlideEl(e)}),this.detachPlugins(),i&&i.offsetParent&&n&&n.offsetParent&&i.replaceWith.apply(i,_toConsumableArray(n.childNodes));for(var r=0,l=Object.entries(s);r<l.length;r++){var c=_slicedToArray(l[r],2),u=c[0],c=c[1];"container"!==u&&c&&e.classList.remove(c)}this.track=null,this.viewport=null,this.page=0,this.slides=[];o=this.events.get("ready");this.events=new Map,o&&this.events.set("ready",o)}}}]),l}(),C=(Object.defineProperty(r,"Panzoom",{enumerable:!0,configurable:!0,writable:!0,value:f}),Object.defineProperty(r,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{viewport:null,track:null,enabled:!0,slides:[],axis:"x",transition:"fade",preload:1,slidesPerPage:"auto",initialPage:0,friction:.12,Panzoom:{decelFriction:.12},center:!0,infinite:!0,fill:!0,dragFree:!1,adaptiveHeight:!1,direction:"ltr",classes:{container:"f-carousel",viewport:"f-carousel__viewport",track:"f-carousel__track",slide:"f-carousel__slide",isLTR:"is-ltr",isRTL:"is-rtl",isHorizontal:"is-horizontal",isVertical:"is-vertical",inTransition:"in-transition",isSelected:"is-selected"},l10n:{NEXT:"Next slide",PREV:"Previous slide",GOTO:"Go to slide #%d"}}}),Object.defineProperty(r,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:n}),!("undefined"==typeof window||!window.document||!window.document.createElement)),ne=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden]):not(.fancybox-focus-guard)","iframe","object","embed","video","audio","[contenteditable]",'[tabindex]:not([tabindex^="-"]):not([disabled]):not([aria-hidden])'].join(","),ae={dragToClose:!0,hideScrollbar:!0,Carousel:{classes:{container:"fancybox__carousel",viewport:"fancybox__viewport",track:"fancybox__track",slide:"fancybox__slide"}},contentClick:"toggleZoom",contentDblClick:!1,backdropClick:"close",animated:!0,idle:3500,showClass:"f-zoomInUp",hideClass:"f-fadeOut",commonCaption:!1,parentEl:null,startIndex:0,l10n:Object.assign(Object.assign({},t),{CLOSE:"Close",NEXT:"Next",PREV:"Previous",MODAL:"You can close this modal content with the ESC key",ERROR:"Something Went Wrong, Please Try Again Later",IMAGE_ERROR:"Image Not Found",ELEMENT_NOT_FOUND:"HTML Element Not Found",AJAX_NOT_FOUND:"Error Loading AJAX : Not Found",AJAX_FORBIDDEN:"Error Loading AJAX : Forbidden",IFRAME_ERROR:"Error Loading Page",TOGGLE_ZOOM:"Toggle zoom level",TOGGLE_THUMBS:"Toggle thumbnails",TOGGLE_SLIDESHOW:"Toggle slideshow",TOGGLE_FULLSCREEN:"Toggle full-screen mode",DOWNLOAD:"Download"}),tpl:{closeButton:'<button data-fancybox-close class="f-button is-close-btn" title="{{CLOSE}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M20 20L4 4m16 0L4 20"/></svg></button>',main:'<div class="fancybox__container" role="dialog" aria-modal="true" aria-label="{{MODAL}}" tabindex="-1">\n    <div class="fancybox__backdrop"></div>\n    <div class="fancybox__carousel"></div>\n    <div class="fancybox__footer"></div>\n  </div>'},groupAll:!1,groupAttr:"data-fancybox",defaultType:"image",defaultDisplay:"block",autoFocus:!0,trapFocus:!0,placeFocusBack:!0,closeButton:"auto",keyboard:{Escape:"close",Delete:"close",Backspace:"close",PageUp:"next",PageDown:"prev",ArrowUp:"prev",ArrowDown:"next",ArrowRight:"next",ArrowLeft:"prev"},Fullscreen:{autoStart:!1},compact:function(){return window.matchMedia("(max-width: 578px), (max-height: 578px)").matches},wheel:"zoom"},S=((i=d=d||{})[i.Init=0]="Init",i[i.Ready=1]="Ready",i[i.Closing=2]="Closing",i[i.CustomClosing=3]="CustomClosing",i[i.Destroy=4]="Destroy",(o=w=w||{})[o.Loading=0]="Loading",o[o.Opening=1]="Opening",o[o.Ready=2]="Ready",o[o.Closing=3]="Closing",function(){_inherits(n,a);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),e=t.apply(this,arguments),Object.defineProperty(_assertThisInitialized(e),"origHash",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(_assertThisInitialized(e),"timer",{enumerable:!0,configurable:!0,writable:!0,value:null}),e}return _createClass(n,[{key:"onChange",value:function(){var e,t,i,n,a,o,s=this.instance,r=s.carousel,l=(this.timer&&clearTimeout(this.timer),s.getSlide());r&&l&&(e=s.isOpeningSlide(l),t=new URL(document.URL).hash,i=l.slug||void 0,n=l.triggerEl||void 0,!(a=i||this.instance.option("slug"))&&n&&n.dataset&&(a=n.dataset.fancybox),o="",a&&"true"!==a&&(o="#"+a+(!i&&1<r.slides.length?"-"+(l.index+1):"")),e&&(this.origHash=t!==o?t:""),o)&&t!==o&&(this.timer=setTimeout(function(){try{s.state===d.Ready&&window.history[e?"pushState":"replaceState"]({},document.title,window.location.pathname+window.location.search+o)}catch(e){}},300))}},{key:"onClose",value:function(){if(this.timer&&clearTimeout(this.timer),!0!==n.hasSilentClose)try{window.history.replaceState({},document.title,window.location.pathname+window.location.search+(this.origHash||""))}catch(e){}}},{key:"attach",value:function(){var e=this.instance;e.on("Carousel.ready",this.onChange),e.on("Carousel.change",this.onChange),e.on("close",this.onClose)}},{key:"detach",value:function(){var e=this.instance;e.off("Carousel.ready",this.onChange),e.off("Carousel.change",this.onChange),e.off("close",this.onClose)}}],[{key:"parseURL",value:function(){var e=window.location.hash.slice(1),t=e.split("-"),i=t[t.length-1],i=i&&/^\+?\d+$/.test(i)&&parseInt(t.pop()||"1",10)||1;return{hash:e,slug:t.join("-"),index:i}}},{key:"startFromUrl",value:function(){var e,t,i;n.hasSilentClose=!1,R.getInstance()||!1===R.defaults.Hash||(t=(e=n.parseURL()).hash,i=e.slug,e=e.index,i&&((t=document.querySelector('[data-slug="'.concat(t,'"]')))&&t.dispatchEvent(new CustomEvent("click",{bubbles:!0,cancelable:!0})),R.getInstance()||(i=document.querySelectorAll('[data-fancybox="'.concat(i,'"]'))).length&&(t=i[e-1])&&t.dispatchEvent(new CustomEvent("click",{bubbles:!0,cancelable:!0}))))}},{key:"destroy",value:function(){window.removeEventListener("hashchange",G,!1)}}]),n}());function oe(){window.addEventListener("hashchange",G,!1),setTimeout(function(){S.startFromUrl()},500)}Object.defineProperty(S,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(S,"hasSilentClose",{enumerable:!0,configurable:!0,writable:!0,value:!1}),C&&(/complete|interactive|loaded/.test(document.readyState)?oe():document.addEventListener("DOMContentLoaded",oe));function se(e){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=new URL(e),i=new URLSearchParams(i.search),n=new URLSearchParams,a=0,o=[].concat(_toConsumableArray(i),_toConsumableArray(Object.entries(t)));a<o.length;a++){var s=_slicedToArray(o[a],2),r=s[0],s=s[1].toString();"t"===r?n.set("start",parseInt(s).toString()):n.set(r,s)}return i=n.toString(),(t=e.match(/#t=((.*)?\d+s)/))&&(i+="#t=".concat(t[1])),i}function re(){var e=window.getSelection();return e&&"Range"===e.type}var E,_,n=function(){_inherits(t,a);var e=_createSuper(t);function t(){return _classCallCheck(this,t),e.apply(this,arguments)}return _createClass(t,[{key:"onCreateSlide",value:function(e,t,i){var n=this.instance.optionFor(i,"src")||"";i.el&&"image"===i.type&&"string"==typeof n&&this.setImage(i,n)}},{key:"onRemoveSlide",value:function(e,t,i){i.panzoom&&i.panzoom.destroy(),i.panzoom=void 0,i.imageEl=void 0}},{key:"onChange",value:function(e,t,i,n){var a,o=_createForOfIteratorHelper(t.slides);try{for(o.s();!(a=o.n()).done;){var s=a.value,r=s.panzoom;r&&s.index!==i&&r.reset(.35)}}catch(e){o.e(e)}finally{o.f()}}},{key:"onClose",value:function(){var e,t,i,n,a,o,s,r=this.instance,l=r.container,c=r.getSlide();l&&l.parentElement&&c&&(n=c.el,e=c.contentEl,t=c.panzoom,i=c.thumbElSrc,n)&&i&&e&&t&&!t.isContentLoading&&t.state!==y.Init&&t.state!==y.Destroy&&(t.updateMetrics(),n=this.getZoomInfo(c))&&(this.instance.state=d.CustomClosing,l.classList.remove("is-zooming-in"),l.classList.add("is-zooming-out"),e.style.backgroundImage="url('".concat(i,"')"),c=l.getBoundingClientRect(),1===((null==(i=window.visualViewport)?void 0:i.scale)||1)&&Object.assign(l.style,{position:"absolute",top:"".concat(window.pageYOffset,"px"),left:"".concat(window.pageXOffset,"px"),bottom:"auto",right:"auto",width:"".concat(c.width,"px"),height:"".concat(c.height,"px"),overflow:"hidden"}),i=n.x,l=n.y,c=n.scale,(n=n.opacity)&&(o=t.scale,s=c-o,a=function(e){return 1+((e-o)/s*-1||0)},t.on("afterTransform",function(){e.style.opacity=a(t.scale)+""})),t.on("endAnimation",function(){r.destroy()}),t.target.a=c,t.target.b=0,t.target.c=0,t.target.d=c,t.panTo({x:i,y:l,scale:c,friction:n?.2:.33,ignoreBounds:!0}),t.isResting)&&r.destroy()}},{key:"setImage",value:function(c,e){var u=this,h=this.instance;c.src=e,this.process(c,e).then(function(e){var t,i,n,a,o,s=c.contentEl,r=c.imageEl,l=c.thumbElSrc;!h.isClosing()&&s&&r&&(s.offsetHeight,r=!!h.isOpeningSlide(c)&&u.getZoomInfo(c),u.option("protected")&&(null!=(a=c.el)&&a.addEventListener("contextmenu",function(e){e.preventDefault()}),a=document.createElement("div"),O(a,"fancybox-protected"),s.appendChild(a)),l&&r?(a=e.contentRect,t=Math.max(a.fullWidth,a.fullHeight),i=null,!r.opacity&&1200<t&&(i=document.createElement("img"),O(i,"fancybox-ghost"),i.src=l,s.appendChild(i)),n=function(){i&&(O(i,"f-fadeFastOut"),setTimeout(function(){i&&(i.remove(),i=null)},200))},o=l,new Promise(function(e,t){var i=new Image;i.onload=e,i.onerror=t,i.src=o}).then(function(){c.state=w.Opening,u.instance.emit("reveal",c),u.zoomIn(c).then(function(){n(),u.instance.done(c)},function(){h.hideLoading(c)}),i&&setTimeout(function(){n()},2500<t?800:200)},function(){h.hideLoading(c),h.revealContent(c)})):(a=u.optionFor(c,"initialSize"),r=u.optionFor(c,"zoom"),s={event:h.prevMouseMoveEvent||h.options.event,friction:r?.12:0},l=h.optionFor(c,"showClass")||void 0,r=!0,h.isOpeningSlide(c)&&("full"===a?e.zoomToFull(s):"cover"===a?e.zoomToCover(s):"max"===a?e.zoomToMax(s):r=!1,e.stop("current")),r&&(l=l&&(e.isDragging?"f-fadeIn":"")),h.revealContent(c,l)))},function(){h.setError(c,"{{IMAGE_ERROR}}")})}},{key:"process",value:function(r,l){var c=this;return new Promise(function(t,e){var i,n,a=c.instance,o=r.el,s=(a.clearContent(r),a.showLoading(r),c.optionFor(r,"content"));(s="string"==typeof s?m(s):s)&&u(s)||((s=document.createElement("img"))instanceof HTMLImageElement&&(n="",n="string"==typeof(i=r.caption)&&i?i.replace(/<[^>]+>/gi,"").substring(0,1e3):"Image ".concat(r.index+1," of ").concat(null==(i=a.carousel)?void 0:i.pages.length),s.src=l||"",s.alt=n,s.draggable=!1,r.srcset)&&s.setAttribute("srcset",r.srcset),r.sizes&&s.setAttribute("sizes",r.sizes)),s.classList.add("fancybox-image"),r.imageEl=s,a.setContent(r,s,!1),r.panzoom=new f(o,p({transformParent:!0},c.option("Panzoom")||{},{content:s,width:a.optionFor(r,"width","auto"),height:a.optionFor(r,"height","auto"),wheel:function(){var e=a.option("wheel");return("zoom"===e||"pan"==e)&&e},click:function(e,t){if(a.isCompact||a.isClosing())return!1;if(r.index!==(null==(i=a.getSlide())?void 0:i.index))return!1;if(t){var i=t.composedPath()[0];if(["A","BUTTON","TEXTAREA","OPTION","INPUT","SELECT","VIDEO"].includes(i.nodeName))return!1}i=!t||t.target&&(null==(i=r.contentEl)?void 0:i.contains(t.target));return a.option(i?"contentClick":"backdropClick")||!1},dblClick:function(){return a.isCompact?"toggleZoom":a.option("contentDblClick")||!1},spinner:!1,panOnlyZoomed:!0,wheelLimit:1/0,on:{ready:function(e){t(e)},error:function(){e()},destroy:function(){e()}}}))})}},{key:"zoomIn",value:function(d){var f=this;return new Promise(function(i,e){var t,n,a,o,s=f.instance,r=s.container,l=d.panzoom,c=d.contentEl,u=d.el,h=(l&&l.updateMetrics(),f.getZoomInfo(d));h&&u&&c&&l&&r?(u=h.x,t=h.y,n=h.scale,a=h.opacity,o=function(){d.state!==w.Closing&&(a&&(c.style.opacity=Math.max(Math.min(1,1-(1-l.scale)/(1-n)),0)+""),1<=l.scale)&&l.scale>l.targetScale-.1&&i(l)},l.on("endAnimation",h=function e(t){v(r,"is-zooming-in"),t.scale<.99||1.01<t.scale||(c.style.opacity="",t.off("endAnimation",e),t.off("touchStart",e),t.off("afterTransform",o),i(t))}),l.on("touchStart",h),l.on("afterTransform",o),l.on(["error","destroy"],function(){e()}),l.panTo({x:u,y:t,scale:n,friction:0,ignoreBounds:!0}),l.stop("current"),h={event:"mousemove"===l.panMode?s.prevMouseMoveEvent||s.options.event:void 0},u=f.optionFor(d,"initialSize"),O(r,"is-zooming-in"),s.hideLoading(d),"full"===u?l.zoomToFull(h):"cover"===u?l.zoomToCover(h):"max"===u?l.zoomToMax(h):l.reset(.172)):e()})}},{key:"getZoomInfo",value:function(e){var t,i,n,a,o=e.el,s=e.imageEl,r=e.thumbEl,l=e.panzoom;return!!(o&&s&&r&&l&&!(Z(r)<3)&&this.optionFor(e,"zoom")&&this.instance.state!==d.Destroy&&1===((null==(o=window.visualViewport)?void 0:o.scale)||1)&&(e=(s=r.getBoundingClientRect()).top,o=s.left,r=s.width,s=s.height,t=(n=l.contentRect).top,a=n.left,i=n.fitWidth,n=n.fitHeight,r)&&s&&i&&n)&&{x:-1*((a+=(l=l.container.getBoundingClientRect()).left)+.5*i-(o+.5*r)),y:-1*((t+=l.top)+.5*n-(e+.5*s)),scale:r/i,opacity:a="auto"===(a=this.option("zoomOpacity")||!1)?.1<Math.abs(r/s-i/n):a}}},{key:"attach",value:function(){var e=this,t=e.instance;t.on("Carousel.change",e.onChange),t.on("Carousel.createSlide",e.onCreateSlide),t.on("Carousel.removeSlide",e.onRemoveSlide),t.on("close",e.onClose)}},{key:"detach",value:function(){var e=this,t=e.instance;t.off("Carousel.change",e.onChange),t.off("Carousel.createSlide",e.onCreateSlide),t.off("Carousel.removeSlide",e.onRemoveSlide),t.off("close",e.onClose)}}]),t}(),le=(Object.defineProperty(n,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{initialSize:"fit",Panzoom:{maxScale:1},protected:!1,zoom:!0,zoomOpacity:"auto"}}),["image","html","ajax","inline","clone","iframe","map","pdf","html5video","youtube","vimeo","video"]),t=function(){_inherits(t,a);var e=_createSuper(t);function t(){return _classCallCheck(this,t),e.apply(this,arguments)}return _createClass(t,[{key:"onInitSlide",value:function(e,t,i){this.processType(i)}},{key:"onCreateSlide",value:function(e,t,i){this.setContent(i)}},{key:"onRemoveSlide",value:function(e,t,i){i.xhr&&(i.xhr.abort(),i.xhr=null);var n=i.iframeEl,n=(n&&(n.onload=n.onerror=null,n.src="//about:blank",i.iframeEl=null),i.contentEl),a=i.placeholderEl;if("inline"===i.type&&n&&a)n.classList.remove("fancybox__content"),"none"!==n.style.display&&(n.style.display="none"),a.parentNode&&a.parentNode.insertBefore(n,a),a.remove(),i.contentEl=void 0,i.placeholderEl=void 0;else for(;i.el&&i.el.firstChild;)i.el.removeChild(i.el.firstChild)}},{key:"onSelectSlide",value:function(e,t,i){i.state===w.Ready&&this.playVideo()}},{key:"onUnselectSlide",value:function(e,t,i){var n,a,o;if("html5video"===i.type)try{null!=(a=null==(n=i.el)?void 0:n.querySelector("video"))&&a.pause()}catch(e){}else"vimeo"===i.type?o={method:"pause",value:"true"}:"youtube"===i.type&&(o={event:"command",func:"pauseVideo"}),o&&i.iframeEl&&i.iframeEl.contentWindow&&i.iframeEl.contentWindow.postMessage(JSON.stringify(o),"*"),i.poller&&clearTimeout(i.poller)}},{key:"onDone",value:function(e,t){e.isCurrentSlide(t)&&!e.isClosing()&&this.playVideo()}},{key:"onRefresh",value:function(e,t){var i=this;t.slides.forEach(function(e){e.el&&(i.setAspectRatio(e),i.resizeIframe(e))})}},{key:"onMessage",value:function(e){try{var t,i=JSON.parse(e.data);if("https://player.vimeo.com"===e.origin){if("ready"===i.event)for(var n=0,a=Array.from(document.getElementsByClassName("fancybox__iframe"));n<a.length;n++){var o=a[n];o instanceof HTMLIFrameElement&&o.contentWindow===e.source&&(o.dataset.ready="true")}}else e.origin.match(/^https:\/\/(www.)?youtube(-nocookie)?.com$/)&&"onReady"===i.event&&(t=document.getElementById(i.id))&&(t.dataset.ready="true")}catch(e){}}},{key:"loadAjaxContent",value:function(e){var t=this.instance.optionFor(e,"src")||"",i=(this.instance.showLoading(e),this.instance),n=new XMLHttpRequest,a=(i.showLoading(e),n.onreadystatechange=function(){n.readyState===XMLHttpRequest.DONE&&i.state===d.Ready&&(i.hideLoading(e),200===n.status?i.setContent(e,n.responseText):i.setError(e,404===n.status?"{{AJAX_NOT_FOUND}}":"{{AJAX_FORBIDDEN}}"))},e.ajax||null);n.open(a?"POST":"GET",t+""),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.send(a),e.xhr=n}},{key:"setInlineContent",value:function(e){var t,i=null;u(e.src)?i=e.src:"string"==typeof e.src&&(i=(t=e.src.split("#",2).pop())?document.getElementById(t):null),i?("clone"===e.type||i.closest(".fancybox__slide")?((t=(i=i.cloneNode(!0)).dataset.animationName)&&(i.classList.remove(t),delete i.dataset.animationName),t=(t=i.getAttribute("id"))?"".concat(t,"--clone"):"clone-".concat(this.instance.id,"-").concat(e.index),i.setAttribute("id",t)):i.parentNode&&((t=document.createElement("div")).classList.add("fancybox-placeholder"),i.parentNode.insertBefore(t,i),e.placeholderEl=t),this.instance.setContent(e,i)):this.instance.setError(e,"{{ELEMENT_NOT_FOUND}}")}},{key:"setIframeContent",value:function(t){var i=this,e=t.src,n=t.el;if(e&&"string"==typeof e&&n){n.classList.add("is-loading");var a=this.instance,o=document.createElement("iframe");o.className="fancybox__iframe",o.setAttribute("id","fancybox__iframe_".concat(a.id,"_").concat(t.index));for(var s=0,r=Object.entries(this.optionFor(t,"iframeAttr")||{});s<r.length;s++){var l=_slicedToArray(r[s],2),c=l[0],l=l[1];o.setAttribute(c,l)}o.onerror=function(){a.setError(t,"{{IFRAME_ERROR}}")},t.iframeEl=o;n=this.optionFor(t,"preload");"iframe"!==t.type||!1===n?(o.setAttribute("src",t.src+""),a.setContent(t,o,!1),this.resizeIframe(t),a.revealContent(t)):(a.showLoading(t),o.onload=function(){var e;o.src.length&&(e="true"!==o.dataset.ready,o.dataset.ready="true",i.resizeIframe(t),e?a.revealContent(t):a.hideLoading(t))},o.setAttribute("src",e),a.setContent(t,o,!1))}}},{key:"resizeIframe",value:function(e){var t=e.iframeEl,i=null==t?void 0:t.parentElement;if(t&&i){var n=e.autoSize,a=e.width||0,o=e.height||0,s=(a&&o&&(n=!1),i&&i.style);if(!1!==e.preload&&!1!==n&&s)try{var r,l,c,u=window.getComputedStyle(i),h=parseFloat(u.paddingLeft)+parseFloat(u.paddingRight),d=parseFloat(u.paddingTop)+parseFloat(u.paddingBottom),f=t.contentWindow;f&&(l=(r=f.document).getElementsByTagName("html")[0],c=r.body,s.width="",c.style.overflow="hidden",a=a||l.scrollWidth+h,s.width="".concat(a,"px"),c.style.overflow="",s.flex="0 0 auto",s.height="".concat(c.scrollHeight,"px"),o=l.scrollHeight+d)}catch(e){}(a||o)&&(n={flex:"0 1 auto",width:"",height:""},a&&(n.width="".concat(a,"px")),o&&(n.height="".concat(o,"px")),Object.assign(s,n))}}},{key:"playVideo",value:function(){var i=this.instance.getSlide();if(i){var e=i.el;if(e&&e.offsetParent&&this.optionFor(i,"videoAutoplay")){if("html5video"===i.type)try{var t,n=e.querySelector("video");n&&void 0!==(t=n.play())&&t.then(function(){}).catch(function(e){n.muted=!0,n.play()})}catch(i){}"youtube"!==i.type&&"vimeo"!==i.type||function e(){if(i.iframeEl&&i.iframeEl.contentWindow){var t;if("true"===i.iframeEl.dataset.ready)return(t="youtube"===i.type?{event:"command",func:"playVideo"}:{method:"play",value:"true"})&&i.iframeEl.contentWindow.postMessage(JSON.stringify(t),"*"),void(i.poller=void 0);"youtube"===i.type&&(t={event:"listening",id:i.iframeEl.getAttribute("id")},i.iframeEl.contentWindow.postMessage(JSON.stringify(t),"*"))}i.poller=setTimeout(e,250)}()}}}},{key:"processType",value:function(e){var t,i,n,a,o,s;e.html?(e.type="html",e.src=e.html,e.html=""):(t=this.instance.optionFor(e,"src",""))&&"string"==typeof t&&(i=e.type,n=null,(n=t.match(/(youtube\.com|youtu\.be|youtube\-nocookie\.com)\/(?:watch\?(?:.*&)?v=|v\/|u\/|shorts\/|embed\/?)?(videoseries\?list=(?:.*)|[\w-]{11}|\?listType=(?:.*)&list=(?:.*))(?:.*)/i))?(a=(s=this.optionFor(e,"youtube")).nocookie,s=function(e,t){var i={};for(a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(i[a[n]]=e[a[n]]);return i}(s,["nocookie"]),a="www.youtube".concat(a?"-nocookie":"",".com"),s=se(t,s),o=encodeURIComponent(n[2]),e.videoId=o,e.src="https://".concat(a,"/embed/").concat(o,"?").concat(s),e.thumbSrc=e.thumbSrc||"https://i.ytimg.com/vi/".concat(o,"/mqdefault.jpg"),i="youtube"):(n=t.match(/^.+vimeo.com\/(?:\/)?([\d]+)((\/|\?h=)([a-z0-9]+))?(.*)?/))&&(a=se(t,this.optionFor(e,"vimeo")),s=encodeURIComponent(n[1]),o=n[4]||"",e.videoId=s,e.src="https://player.vimeo.com/video/".concat(s,"?").concat(o?"h=".concat(o).concat(a?"&":""):"").concat(a),i="vimeo"),(i=!i&&e.triggerEl&&(s=e.triggerEl.dataset.type,le.includes(s))?s:i)||"string"==typeof t&&("#"===t.charAt(0)?i="inline":(n=t.match(/\.(mp4|mov|ogv|webm)((\?|#).*)?$/i))?(i="html5video",e.videoFormat=e.videoFormat||"video/"+("ogv"===n[1]?"ogg":n[1])):t.match(/(^data:image\/[a-z0-9+\/=]*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg|ico)((\?|#).*)?$)/i)?i="image":t.match(/\.(pdf)((\?|#).*)?$/i)?i="pdf":(n=t.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:(?:(?:maps\/(?:place\/(?:.*)\/)?\@(.*),(\d+.?\d+?)z))|(?:\?ll=))(.*)?/i))?(e.src="https://maps.google.".concat(n[1],"/?ll=").concat((n[2]?n[2]+"&z="+Math.floor(parseFloat(n[3]))+(n[4]?n[4].replace(/^\//,"&"):""):n[4]+"").replace(/\?/,"&"),"&output=").concat(n[4]&&0<n[4].indexOf("layer=c")?"svembed":"embed"),i="map"):(n=t.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:maps\/search\/)(.*)/i))&&(e.src="https://maps.google.".concat(n[1],"/maps?q=").concat(n[2].replace("query=","q=").replace("api=1",""),"&output=embed"),i="map")),i=i||this.instance.option("defaultType"),"image"===(e.type=i))&&(e.thumbSrc=e.thumbSrc||e.src)}},{key:"setContent",value:function(e){var t=this.instance.optionFor(e,"src")||"";if(e&&e.type&&t){switch(e.type){case"html":this.instance.setContent(e,t);break;case"html5video":var i=this.option("videoTpl");i&&this.instance.setContent(e,i.replace(/\{\{src\}\}/gi,t+"").replace(/\{\{format\}\}/gi,this.optionFor(e,"videoFormat")||"").replace(/\{\{poster\}\}/gi,e.poster||e.thumbSrc||""));break;case"inline":case"clone":this.setInlineContent(e);break;case"ajax":this.loadAjaxContent(e);break;case"pdf":case"map":case"youtube":case"vimeo":e.preload=!1;case"iframe":this.setIframeContent(e)}this.setAspectRatio(e)}}},{key:"setAspectRatio",value:function(e){var t,i=e.width||0,n=e.height||0;i&&n||(i=e.contentEl,n=this.optionFor(e,"videoRatio"),t=null==(t=e.el)?void 0:t.getBoundingClientRect(),i&&t&&n&&1!==n&&e.type&&["video","youtube","vimeo","html5video"].includes(e.type)&&(e=t.width,t=t.height,i.style.aspectRatio=n+"",i.style.width=n<e/t?"auto":"",i.style.height=n<e/t?"":"auto"))}},{key:"attach",value:function(){var e=this,t=e.instance;t.on("Carousel.initSlide",e.onInitSlide),t.on("Carousel.createSlide",e.onCreateSlide),t.on("Carousel.removeSlide",e.onRemoveSlide),t.on("Carousel.selectSlide",e.onSelectSlide),t.on("Carousel.unselectSlide",e.onUnselectSlide),t.on("Carousel.Panzoom.refresh",e.onRefresh),t.on("done",e.onDone),window.addEventListener("message",e.onMessage)}},{key:"detach",value:function(){var e=this,t=e.instance;t.off("Carousel.initSlide",e.onInitSlide),t.off("Carousel.createSlide",e.onCreateSlide),t.off("Carousel.removeSlide",e.onRemoveSlide),t.off("Carousel.selectSlide",e.onSelectSlide),t.off("Carousel.unselectSlide",e.onUnselectSlide),t.off("Carousel.Panzoom.refresh",e.onRefresh),t.off("done",e.onDone),window.removeEventListener("message",e.onMessage)}}]),t}(),ce=(Object.defineProperty(t,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{ajax:null,autoSize:!0,iframeAttr:{allow:"autoplay; fullscreen",scrolling:"auto"},preload:!0,videoAutoplay:!0,videoRatio:16/9,videoTpl:'<video class="fancybox__html5video" playsinline controls controlsList="nodownload" poster="{{poster}}">\n  <source src="{{src}}" type="{{format}}" />Sorry, your browser doesn\'t support embedded videos.</video>',videoFormat:"",vimeo:{byline:1,color:"00adef",controls:1,dnt:1,muted:0},youtube:{controls:1,enablejsapi:1,nocookie:1,rel:0,fs:1}}}),"play"),ue="pause",M="ready",he=function(){_inherits(i,a);var t=_createSuper(i);function i(){var e;return _classCallCheck(this,i),e=t.apply(this,arguments),Object.defineProperty(_assertThisInitialized(e),"state",{enumerable:!0,configurable:!0,writable:!0,value:M}),Object.defineProperty(_assertThisInitialized(e),"inHover",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(_assertThisInitialized(e),"timer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(_assertThisInitialized(e),"progressBar",{enumerable:!0,configurable:!0,writable:!0,value:null}),e}return _createClass(i,[{key:"isActive",get:function(){return this.state!==M}},{key:"onReady",value:function(e){this.option("autoStart")&&(e.isInfinite||e.page<e.pages.length-1)&&this.start()}},{key:"onChange",value:function(){var e;null!=(e=this.instance.panzoom)&&e.isResting||(this.removeProgressBar(),this.pause())}},{key:"onSettle",value:function(){this.resume()}},{key:"onVisibilityChange",value:function(){"visible"===document.visibilityState?this.resume():this.pause()}},{key:"onMouseEnter",value:function(){this.inHover=!0,this.pause()}},{key:"onMouseLeave",value:function(){var e;this.inHover=!1,null!=(e=this.instance.panzoom)&&e.isResting&&this.resume()}},{key:"onTimerEnd",value:function(){var e=this.instance;"play"===this.state&&(e.isInfinite||e.page!==e.pages.length-1?e.slideNext():e.slideTo(0))}},{key:"removeProgressBar",value:function(){this.progressBar&&(this.progressBar.remove(),this.progressBar=null)}},{key:"createProgressBar",value:function(){if(!this.option("showProgress"))return null;this.removeProgressBar();var e=this.instance,t=(null==(t=e.pages[e.page])?void 0:t.slides)||[],i=this.option("progressParentEl");return(i=i||(1===t.length?t[0].el:null)||e.viewport)?(t=document.createElement("div"),O(t,"f-progress"),i.prepend(t),(this.progressBar=t).offsetHeight,t):null}},{key:"set",value:function(){var e,t=this,i=t.instance;i.pages.length<2||t.timer||(e=t.option("timeout"),t.state=ce,O(i.container,"has-autoplay"),(i=t.createProgressBar())&&(i.style.transitionDuration="".concat(e,"ms"),i.style.transform="scaleX(1)"),t.timer=setTimeout(function(){t.timer=null,t.inHover||t.onTimerEnd()},e),t.emit("set"))}},{key:"clear",value:function(){this.timer&&(clearTimeout(this.timer),this.timer=null),this.removeProgressBar()}},{key:"start",value:function(){var e,t=this;t.set(),t.state!==M&&(t.option("pauseOnHover")&&((e=t.instance.container).addEventListener("mouseenter",t.onMouseEnter,!1),e.addEventListener("mouseleave",t.onMouseLeave,!1)),document.addEventListener("visibilitychange",t.onVisibilityChange,!1),t.emit("start"))}},{key:"stop",value:function(){var e=this,t=e.state,i=e.instance.container;e.clear(),e.state=M,i.removeEventListener("mouseenter",e.onMouseEnter,!1),i.removeEventListener("mouseleave",e.onMouseLeave,!1),document.removeEventListener("visibilitychange",e.onVisibilityChange,!1),v(i,"has-autoplay"),t!==M&&e.emit("stop")}},{key:"pause",value:function(){this.state===ce&&(this.state=ue,this.clear(),this.emit(ue))}},{key:"resume",value:function(){var e=this,t=e.instance;t.isInfinite||t.page!==t.pages.length-1?e.state!==ce&&(e.state!==ue||e.inHover||(t=new Event("resume",{bubbles:!0,cancelable:!0}),e.emit("resume",t),t.defaultPrevented))||e.set():e.stop()}},{key:"toggle",value:function(){this.state===ce||this.state===ue?this.stop():this.start()}},{key:"attach",value:function(){var e=this,t=e.instance;t.on("ready",e.onReady),t.on("Panzoom.startAnimation",e.onChange),t.on("Panzoom.endAnimation",e.onSettle),t.on("Panzoom.touchMove",e.onChange)}},{key:"detach",value:function(){var e=this,t=e.instance;t.off("ready",e.onReady),t.off("Panzoom.startAnimation",e.onChange),t.off("Panzoom.endAnimation",e.onSettle),t.off("Panzoom.touchMove",e.onChange),e.stop()}}]),i}(),i=(Object.defineProperty(he,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{autoStart:!0,pauseOnHover:!0,progressParentEl:null,showProgress:!0,timeout:3e3}}),function(){_inherits(i,a);var t=_createSuper(i);function i(){var e;return _classCallCheck(this,i),e=t.apply(this,arguments),Object.defineProperty(_assertThisInitialized(e),"ref",{enumerable:!0,configurable:!0,writable:!0,value:null}),e}return _createClass(i,[{key:"onPrepare",value:function(n){var i,e=this,t=n.carousel;t&&(i=n.container)&&(t.options.Autoplay=p({autoStart:!1},this.option("Autoplay")||{},{pauseOnHover:!1,timeout:this.option("timeout"),progressParentEl:function(){return e.option("progressParentEl")||null},on:{start:function(){n.emit("startSlideshow")},set:function(e){var t;i.classList.add("has-slideshow"),(null==(t=n.getSlide())?void 0:t.state)!==w.Ready&&e.pause()},stop:function(){i.classList.remove("has-slideshow"),n.isCompact||n.endIdle(),n.emit("endSlideshow")},resume:function(e,t){var i;!t||!t.cancelable||(null==(i=n.getSlide())?void 0:i.state)===w.Ready&&null!=(i=null==(i=n.carousel)?void 0:i.panzoom)&&i.isResting||t.preventDefault()}}}),t.attachPlugins({Autoplay:he}),this.ref=t.plugins.Autoplay)}},{key:"onReady",value:function(e){var e=e.carousel,t=this.ref;e&&t&&this.option("playOnStart")&&(e.isInfinite||e.page<e.pages.length-1)&&t.start()}},{key:"onDone",value:function(e,t){var i,n=this.ref;n&&((i=t.panzoom)&&i.on("startAnimation",function(){e.isCurrentSlide(t)&&n.stop()}),e.isCurrentSlide(t))&&n.resume()}},{key:"onKeydown",value:function(e,t){var i=this.ref;i&&t===this.option("key")&&"BUTTON"!==(null==(t=document.activeElement)?void 0:t.nodeName)&&i.toggle()}},{key:"attach",value:function(){var e=this,t=e.instance;t.on("Carousel.init",e.onPrepare),t.on("Carousel.ready",e.onReady),t.on("done",e.onDone),t.on("keydown",e.onKeydown)}},{key:"detach",value:function(){var e=this,t=e.instance;t.off("Carousel.init",e.onPrepare),t.off("Carousel.ready",e.onReady),t.off("done",e.onDone),t.off("keydown",e.onKeydown)}}]),i}()),o=(Object.defineProperty(i,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{key:" ",playOnStart:!1,progressParentEl:function(e){var t;return(null==(t=e.instance.container)?void 0:t.querySelector(".fancybox__toolbar [data-fancybox-toggle-slideshow]"))||e.instance.container},timeout:3e3}}),{classes:{container:"f-thumbs f-carousel__thumbs",viewport:"f-thumbs__viewport",track:"f-thumbs__track",slide:"f-thumbs__slide",isResting:"is-resting",isSelected:"is-selected",isLoading:"is-loading",hasThumbs:"has-thumbs"},minCount:2,parentEl:null,thumbTpl:'<button class="f-thumbs__slide__button" tabindex="0" type="button" aria-label="{{GOTO}}" data-carousel-index="%i"><img class="f-thumbs__slide__img" data-lazy-src="{{%s}}" alt="" /></button>',type:"modern"}),de=((I=E=E||{})[I.Init=0]="Init",I[I.Ready=1]="Ready",I[I.Hidden=2]="Hidden",I[I.Disabled=3]="Disabled",function(){_inherits(i,a);var t=_createSuper(i);function i(){var e;return _classCallCheck(this,i),e=t.apply(this,arguments),Object.defineProperty(_assertThisInitialized(e),"type",{enumerable:!0,configurable:!0,writable:!0,value:"modern"}),Object.defineProperty(_assertThisInitialized(e),"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(_assertThisInitialized(e),"track",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(_assertThisInitialized(e),"carousel",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(_assertThisInitialized(e),"panzoom",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(_assertThisInitialized(e),"thumbWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(_assertThisInitialized(e),"thumbClipWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(_assertThisInitialized(e),"thumbHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(_assertThisInitialized(e),"thumbGap",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(_assertThisInitialized(e),"thumbExtraGap",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(_assertThisInitialized(e),"shouldCenter",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(_assertThisInitialized(e),"state",{enumerable:!0,configurable:!0,writable:!0,value:E.Init}),e}return _createClass(i,[{key:"formatThumb",value:function(e,t){return this.instance.localize(t,[["%i",e.index],["%d",e.index+1],["%s",e.thumbSrc||"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"]])}},{key:"getSlides",value:function(){var e=[],t=this.option("thumbTpl")||"";if(t){var i,n=_createForOfIteratorHelper(this.instance.slides||[]);try{for(n.s();!(i=n.n()).done;){var a=i.value,o="";a.type&&(o="for-".concat(a.type),a.type)&&["video","youtube","vimeo","html5video"].includes(a.type)&&(o+=" for-video"),e.push({html:this.formatThumb(a,t),customClass:o})}}catch(e){n.e(e)}finally{n.f()}}return e}},{key:"onInitSlide",value:function(e,t){var i=t.el;i&&(t.thumbSrc=i.dataset.thumbSrc||t.thumbSrc||"",t.thumbClipWidth=parseFloat(i.dataset.thumbClipWidth||"")||t.thumbClipWidth||0,t.thumbHeight=parseFloat(i.dataset.thumbHeight||"")||t.thumbHeight||0)}},{key:"onInitSlides",value:function(){this.state===E.Init&&this.build()}},{key:"onRefreshM",value:function(){this.refreshModern()}},{key:"onChangeM",value:function(){"modern"===this.type&&(this.shouldCenter=!0,this.centerModern())}},{key:"onClickModern",value:function(e){e.preventDefault(),e.stopPropagation();function t(e,t){return(e=document.elementFromPoint(e,t))?s(e):-1}var i,n,a=this.instance,o=a.page,s=function(e){if(e){e=e.closest("[data-carousel-index]");if(e)return parseInt(e.dataset.carouselIndex||"",10)||0}return-1},r=s(e.target);(r=(r=r<0&&(r=t(e.clientX+this.thumbGap,e.clientY))===o?o-1:r)<0&&(r=t(e.clientX-this.thumbGap,e.clientY))===o?o+1:r)<0&&(i=this.thumbExtraGap,n=t(e.clientX-i,e.clientY),i=t(e.clientX+i,e.clientY),r=(r=r<0&&n===o?o+1:r)<0&&i===o?o-1:r),r===o?this.centerModern():-1<r&&r<a.pages.length&&a.slideTo(r)}},{key:"onTransformM",value:function(){if("modern"===this.type){var e=this.instance,t=this.container,i=this.track,n=e.panzoom;if(t&&i&&n&&this.panzoom){k(t,this.cn("isResting"),n.state!==y.Init&&n.isResting);var a,o=this.thumbGap,s=this.thumbExtraGap,r=this.thumbClipWidth,l=0,c=0,u=0,h=_createForOfIteratorHelper(e.slides);try{for(h.s();!(a=h.n()).done;){var d,f=a.value,p=f.index,v=f.thumbSlideEl;v&&(k(v,this.cn("isSelected"),p===e.page),c=1-Math.abs(e.getProgress(p)),v.style.setProperty("--progress",c?c+"":""),l=l+o+(d=.5*((f.thumbWidth||0)-r)),c&&(l-=c*(d+s)),v.style.setProperty("--shift",l-o+""),l+=d,c&&(l-=c*(d+s)),l-=o,0===p)&&(u=s*c)}}catch(e){h.e(e)}finally{h.f()}i&&(i.style.setProperty("--left",u+""),i.style.setProperty("--width",l+u+o+s*c+"")),this.shouldCenter&&this.centerModern()}}}},{key:"buildClassic",value:function(){var i=this,e=this.container,t=this.track,n=this.getSlides();e&&t&&n&&(e=new this.instance.constructor(e,p({track:t,infinite:!1,center:!0,fill:!0,dragFree:!0,slidesPerPage:1,transition:!1,Dots:!1,Navigation:!1,classes:{container:"f-thumbs",viewport:"f-thumbs__viewport",track:"f-thumbs__track",slide:"f-thumbs__slide"}},this.option("Carousel")||{},{Sync:{target:this.instance},slides:n})),this.carousel=e,this.track=t,e.on("ready",function(){i.emit("ready")}),e.on("createSlide",function(e,t){i.emit("createSlide",t,t.el)}))}},{key:"buildModern",value:function(){var o=this;if("modern"===this.type){var e=this.container,t=this.track,s=this.instance,i=this.option("thumbTpl")||"";if(e&&t&&i){e.addEventListener("keydown",function(){v(e,"is-using-mouse")}),O(e,"is-horizontal"),this.updateModern();var n,a=_createForOfIteratorHelper(s.slides||[]);try{for(a.s();!(n=a.n()).done;){var r,l=n.value,c=document.createElement("div");O(c,this.cn("slide")),l.type&&(r="for-".concat(l.type),["video","youtube","vimeo","html5video"].includes(l.type)&&(r+=" for-video"),O(c,r)),c.appendChild(m(this.formatThumb(l,i))),this.emit("createSlide",l,c),l.thumbSlideEl=c,t.appendChild(c),this.resizeModernSlide(l)}}catch(e){a.e(e)}finally{a.f()}var u=new s.constructor.Panzoom(e,{content:t,lockAxis:"x",zoom:!1,panOnlyZoomed:!1,bounds:function(){var e=0,t=0,i=s.slides[0],n=s.slides[s.slides.length-1],a=s.slides[s.page];return i&&n&&a&&(t=-1*o.getModernThumbPos(0),0!==s.page&&(t+=.5*(i.thumbWidth||0)),e=-1*o.getModernThumbPos(s.slides.length-1),s.page!==s.slides.length-1)&&(e+=(n.thumbWidth||0)-(a.thumbWidth||0)-.5*(n.thumbWidth||0)),{x:{min:e,max:t},y:{min:0,max:0}}}});u.on("touchStart",function(e,t){o.shouldCenter=!1,O(o.container,"is-using-mouse")}),u.on("click",function(e,t){return o.onClickModern(t)}),u.on("ready",function(){o.centerModern(),o.emit("ready")}),u.on(["afterTransform","refresh"],function(e){o.lazyLoadModern()}),this.panzoom=u,this.refreshModern()}}}},{key:"updateModern",value:function(){var e;"modern"===this.type&&(e=this.container)&&(this.thumbGap=parseFloat(getComputedStyle(e).getPropertyValue("--f-thumb-gap"))||0,this.thumbExtraGap=parseFloat(getComputedStyle(e).getPropertyValue("--f-thumb-extra-gap"))||0,this.thumbWidth=parseFloat(getComputedStyle(e).getPropertyValue("--f-thumb-width"))||40,this.thumbClipWidth=parseFloat(getComputedStyle(e).getPropertyValue("--f-thumb-clip-width"))||40,this.thumbHeight=parseFloat(getComputedStyle(e).getPropertyValue("--f-thumb-height"))||40)}},{key:"refreshModern",value:function(){var e;if("modern"===this.type){this.updateModern();var t,i=_createForOfIteratorHelper(this.instance.slides||[]);try{for(i.s();!(t=i.n()).done;){var n=t.value;this.resizeModernSlide(n)}}catch(e){i.e(e)}finally{i.f()}this.onTransformM(),null!=(e=this.panzoom)&&e.updateMetrics(!0),this.centerModern(0)}}},{key:"centerModern",value:function(e){var t=this.instance,i=this.container,n=this.panzoom;if(i&&n&&n.state!==y.Init){for(var a,i=t.page,o=this.getModernThumbPos(i),s=o,r=t.page-3;r<t.page+3;r++)r<0||r>t.pages.length-1||r===t.page||0<(a=1-Math.abs(t.getProgress(r)))&&a<1&&(s+=a*(this.getModernThumbPos(r)-o));i=100;void 0===e&&(e=.2,0<t.inTransition.size&&(e=.12),Math.abs(-1*n.current.e-s)>n.containerRect.width)&&(e=.5,i=0),n.options.maxVelocity=i,n.applyChange({panX:P(-1*s-n.target.e,1e3),friction:null===t.prevPage?0:e})}}},{key:"lazyLoadModern",value:function(){var s=this,e=this.instance,r=this.panzoom;if(r){var l=-1*r.current.e||0,t=this.getModernThumbPos(e.page);if(r.state!==y.Init||0===t){var c,i=_createForOfIteratorHelper(e.slides||[]);try{for(i.s();!(c=i.n()).done;)(function(){var e=c.value,t=e.thumbSlideEl;if(!t)return;var i=t.querySelector("img[data-lazy-src]"),e=e.index,e=s.getModernThumbPos(e),n=l-.5*r.containerRect.innerWidth,a=n+r.containerRect.innerWidth;if(!i||e<n||a<e)return;n=i.dataset.lazySrc;if(!n||!n.length)return;if(delete i.dataset.lazySrc,i.src=n,i.complete)return;O(t,s.cn("isLoading"));var o=m(h);t.appendChild(o),i.addEventListener("load",function(){t.offsetParent&&(t.classList.remove(s.cn("isLoading")),o.remove())},!1)})()}catch(e){i.e(e)}finally{i.f()}}}}},{key:"resizeModernSlide",value:function(e){var t;"modern"===this.type&&e.thumbSlideEl&&(t=e.thumbClipWidth&&e.thumbHeight?Math.round(this.thumbHeight*(e.thumbClipWidth/e.thumbHeight)):this.thumbWidth,e.thumbWidth=t)}},{key:"getModernThumbPos",value:function(e){var t,i=this.instance.slides[e],n=this.panzoom;return n&&n.contentRect.fitWidth?(t=n.containerRect.innerWidth,n=n.contentRect.width,2===this.instance.slides.length&&(--e,n=2*this.thumbClipWidth),e=e*(this.thumbClipWidth+this.thumbGap)+this.thumbExtraGap+.5*(i.thumbWidth||0),P((e-=t<n?.5*t:.5*n)||0,1)):0}},{key:"build",value:function(){var e=this.instance,t=e.container,i=this.option("minCount")||0;if(i){var n,a=0,o=_createForOfIteratorHelper(e.slides||[]);try{for(o.s();!(n=o.n()).done;)n.value.thumbSrc&&a++}catch(e){o.e(e)}finally{o.f()}if(a<i)return this.cleanup(),void(this.state=E.Disabled)}var s,e=this.option("type");["modern","classic"].indexOf(e)<0?this.state=E.Disabled:(this.type=e,i=document.createElement("div"),O(i,this.cn("container")),O(i,"is-".concat(e)),(s=this.option("parentEl"))?s.appendChild(i):t.after(i),this.container=i,O(t,this.cn("hasThumbs")),s=document.createElement("div"),O(s,this.cn("track")),i.appendChild(s),this.track=s,"classic"===e?this.buildClassic():this.buildModern(),this.state=E.Ready)}},{key:"cleanup",value:function(){this.carousel&&this.carousel.destroy(),this.carousel=null,this.panzoom&&this.panzoom.destroy(),this.panzoom=null,this.container&&this.container.remove(),this.container=null,this.track=null,this.state=E.Init,v(this.instance.container,this.cn("hasThumbs"))}},{key:"attach",value:function(){var e=this,t=e.instance;t.on("initSlide",e.onInitSlide),t.state===b.Init?t.on("initSlides",e.onInitSlides):e.onInitSlides(),t.on("Panzoom.afterTransform",e.onTransformM),t.on("Panzoom.refresh",e.onRefreshM),t.on("change",e.onChangeM)}},{key:"detach",value:function(){var e=this,t=e.instance;t.off("initSlide",e.onInitSlide),t.off("initSlides",e.onInitSlides),t.off("Panzoom.afterTransform",e.onTransformM),t.off("Panzoom.refresh",e.onRefreshM),t.off("change",e.onChangeM),e.cleanup()}}]),i}()),I=(Object.defineProperty(de,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.assign(Object.assign({},o),{key:"t",showOnStart:!0,parentEl:null})),fe="is-masked",pe="aria-hidden",o=function(){_inherits(i,a);var t=_createSuper(i);function i(){var e;return _classCallCheck(this,i),e=t.apply(this,arguments),Object.defineProperty(_assertThisInitialized(e),"ref",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(_assertThisInitialized(e),"hidden",{enumerable:!0,configurable:!0,writable:!0,value:!1}),e}return _createClass(i,[{key:"isEnabled",get:function(){var e=this.ref;return e&&e.state!==E.Disabled}},{key:"isHidden",get:function(){return this.hidden}},{key:"onInit",value:function(){var e,i=this,n=this,t=n.instance,a=t.carousel;!n.ref&&a&&(e=n.option("parentEl")||t.footer||t.container)&&((e=p({},n.options,{parentEl:e,classes:{container:"f-thumbs fancybox__thumbs"},Carousel:{Sync:{friction:t.option("Carousel.friction")||0}},on:{ready:function(e){var t=e.container;t&&i.hidden&&(n.refresh(),t.style.transition="none",n.hide(),t.offsetHeight,queueMicrotask(function(){t.style.transition="",n.show()}))}}})).Carousel=e.Carousel||{},e.Carousel.on=p((null==(t=n.options.Carousel)?void 0:t.on)||{},{click:function(e,t){t.stopPropagation()}}),a.options.Thumbs=e,a.attachPlugins({Thumbs:de}),n.ref=a.plugins.Thumbs,n.option("showOnStart")||(n.ref.state=E.Hidden,n.hidden=!0))}},{key:"onResize",value:function(){var e=null==(e=this.ref)?void 0:e.container;e&&(e.style.maxHeight="")}},{key:"onKeydown",value:function(e,t){var i=this.option("key");i&&i===t&&this.toggle()}},{key:"toggle",value:function(){var e=this.ref;e&&e.state!==E.Disabled&&(e.state!==E.Hidden?this.hidden?this.show():this.hide():e.build())}},{key:"show",value:function(){var e=this.ref,e=e&&e.state!==E.Disabled&&e.container;e&&(this.refresh(),e.offsetHeight,e.removeAttribute(pe),e.classList.remove(fe),this.hidden=!1)}},{key:"hide",value:function(){var e=this.ref,e=e&&e.container;e&&(this.refresh(),e.offsetHeight,e.classList.add(fe),e.setAttribute(pe,"true")),this.hidden=!0}},{key:"refresh",value:function(){var e,t=this.ref;t&&t.state!==E.Disabled&&(e=(null==(t=t.container)?void 0:t.firstChild)||null,t)&&e&&e.childNodes.length&&(t.style.maxHeight="".concat(e.getBoundingClientRect().height,"px"))}},{key:"attach",value:function(){var e=this,t=e.instance;t.state===d.Init?t.on("Carousel.init",e.onInit):e.onInit(),t.on("resize",e.onResize),t.on("keydown",e.onKeydown)}},{key:"detach",value:function(){var e=this,t=e.instance;t.off("Carousel.init",e.onInit),t.off("resize",e.onResize),t.off("keydown",e.onKeydown),null!=(t=t.carousel)&&t.detachPlugins(["Thumbs"]),e.ref=null}}]),i}(),ve=(Object.defineProperty(o,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:I}),{panLeft:{icon:'<svg><path d="M5 12h14M5 12l6 6M5 12l6-6"/></svg>',change:{panX:-100}},panRight:{icon:'<svg><path d="M5 12h14M13 18l6-6M13 6l6 6"/></svg>',change:{panX:100}},panUp:{icon:'<svg><path d="M12 5v14M18 11l-6-6M6 11l6-6"/></svg>',change:{panY:-100}},panDown:{icon:'<svg><path d="M12 5v14M18 13l-6 6M6 13l6 6"/></svg>',change:{panY:100}},zoomIn:{icon:'<svg><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M11 8v6M8 11h6"/></svg>',action:"zoomIn"},zoomOut:{icon:'<svg><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg>',action:"zoomOut"},toggle1to1:{icon:'<svg><path d="M3.51 3.07c5.74.02 11.48-.02 17.22.02 1.37.1 2.34 1.64 2.18 3.13 0 4.08.02 8.16 0 12.23-.1 1.54-1.47 2.64-2.79 2.46-5.61-.01-11.24.02-16.86-.01-1.36-.12-2.33-1.65-2.17-3.14 0-4.07-.02-8.16 0-12.23.1-1.36 1.22-2.48 2.42-2.46Z"/><path d="M5.65 8.54h1.49v6.92m8.94-6.92h1.49v6.92M11.5 9.4v.02m0 5.18v0"/></svg>',action:"toggleZoom"},toggleZoom:{icon:'<svg><g><line x1="11" y1="8" x2="11" y2="14"></line></g><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg>',action:"toggleZoom"},iterateZoom:{icon:'<svg><g><line x1="11" y1="8" x2="11" y2="14"></line></g><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg>',action:"iterateZoom"},rotateCCW:{icon:'<svg><path d="M15 4.55a8 8 0 0 0-6 14.9M9 15v5H4M18.37 7.16v.01M13 19.94v.01M16.84 18.37v.01M19.37 15.1v.01M19.94 11v.01"/></svg>',action:"rotateCCW"},rotateCW:{icon:'<svg><path d="M9 4.55a8 8 0 0 1 6 14.9M15 15v5h5M5.63 7.16v.01M4.06 11v.01M4.63 15.1v.01M7.16 18.37v.01M11 19.94v.01"/></svg>',action:"rotateCW"},flipX:{icon:'<svg style="stroke-width: 1.3"><path d="M12 3v18M16 7v10h5L16 7M8 7v10H3L8 7"/></svg>',action:"flipX"},flipY:{icon:'<svg style="stroke-width: 1.3"><path d="M3 12h18M7 16h10L7 21v-5M7 8h10L7 3v5"/></svg>',action:"flipY"},fitX:{icon:'<svg><path d="M4 12V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v6M10 18H3M21 18h-7M6 15l-3 3 3 3M18 15l3 3-3 3"/></svg>',action:"fitX"},fitY:{icon:'<svg><path d="M12 20H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h6M18 14v7M18 3v7M15 18l3 3 3-3M15 6l3-3 3 3"/></svg>',action:"fitY"},reset:{icon:'<svg><path d="M20 11A8.1 8.1 0 0 0 4.5 9M4 5v4h4M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4"/></svg>',action:"reset"},toggleFS:{icon:'<svg><g><path d="M14.5 9.5 21 3m0 0h-6m6 0v6M3 21l6.5-6.5M3 21v-6m0 6h6"/></g><g><path d="m14 10 7-7m-7 7h6m-6 0V4M3 21l7-7m0 0v6m0-6H4"/></g></svg>',action:"toggleFS"}}),ge=((I=_=_||{})[I.Init=0]="Init",I[I.Ready=1]="Ready",I[I.Disabled=2]="Disabled",{tabindex:"-1",width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"}),I=function(){_inherits(i,a);var t=_createSuper(i);function i(){var e;return _classCallCheck(this,i),e=t.apply(this,arguments),Object.defineProperty(_assertThisInitialized(e),"state",{enumerable:!0,configurable:!0,writable:!0,value:_.Init}),Object.defineProperty(_assertThisInitialized(e),"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),e}return _createClass(i,[{key:"onReady",value:function(e){var t;if(e.carousel){var i=this.option("display"),n=this.option("absolute"),e=this.option("enabled");if("auto"===e){var a=this.instance.carousel,o=0;if(a){var s,r=_createForOfIteratorHelper(a.slides);try{for(r.s();!(s=r.n()).done;){var l=s.value;!l.panzoom&&"image"!==l.type||o++}}catch(e){r.e(e)}finally{r.f()}}o||(e=!1)}var c=0,u={left:[],middle:[],right:[]};if(i=e?i:void 0)for(var h=0,d=["left","middle","right"];h<d.length;h++){var f,p=d[h],v=_createForOfIteratorHelper(i[p]);try{for(v.s();!(f=v.n()).done;){var g=f.value,m=this.createEl(g);m&&(null!=(t=u[p])&&t.push(m),c++)}}catch(e){v.e(e)}finally{v.f()}}var y=null;if(y=c?this.createContainer():y){for(var b=0,w=Object.entries(u);b<w.length;b++){var k,T=_slicedToArray(w[b],2),x=T[0],T=T[1],C=document.createElement("div"),S=(O(C,"fancybox__toolbar__column is-"+x),_createForOfIteratorHelper(T));try{for(S.s();!(k=S.n()).done;){var E=k.value;C.appendChild(E)}}catch(e){S.e(e)}finally{S.f()}"auto"!==n||"middle"!==x||T.length||(n=!0),y.appendChild(C)}!0===n&&O(y,"is-absolute"),this.state=_.Ready,this.onRefresh()}else this.state=_.Disabled}}},{key:"onClick",value:function(e){var t=this.instance,i=t.getSlide(),i=null==i?void 0:i.panzoom,n=e.target,n=n&&u(n)?n.dataset:null;if(n)if(void 0!==n.fancyboxToggleThumbs)e.preventDefault(),e.stopPropagation(),null!=(a=t.plugins.Thumbs)&&a.toggle();else if(void 0!==n.fancyboxToggleFullscreen)e.preventDefault(),e.stopPropagation(),this.instance.toggleFullscreen();else if(void 0!==n.fancyboxToggleSlideshow)e.preventDefault(),e.stopPropagation(),a=(t=null==(a=t.carousel)?void 0:a.plugins.Autoplay).isActive,i&&"mousemove"===i.panMode&&!a&&i.reset(),a?t.stop():t.start();else{var a=n.panzoomAction,t=n.panzoomChange;if((t||a)&&(e.preventDefault(),e.stopPropagation()),t){n={};try{n=JSON.parse(t)}catch(e){}i&&i.applyChange(n)}else a&&i&&i[a]&&i[a]()}}},{key:"onChange",value:function(){this.onRefresh()}},{key:"onRefresh",value:function(){if(!this.instance.isClosing()){var e=this.container;if(e){var t=this.instance.getSlide();if(t&&t.state===w.Ready){var i,n=t&&!t.error&&t.panzoom,a=_createForOfIteratorHelper(e.querySelectorAll("[data-panzoom-action]"));try{for(a.s();!(i=a.n()).done;){var o=i.value;n?(o.removeAttribute("disabled"),o.removeAttribute("tabindex")):(o.setAttribute("disabled",""),o.setAttribute("tabindex","-1"))}}catch(e){a.e(e)}finally{a.f()}var s,r=n&&n.canZoomIn(),l=n&&n.canZoomOut(),c=_createForOfIteratorHelper(e.querySelectorAll('[data-panzoom-action="zoomIn"]'));try{for(c.s();!(s=c.n()).done;){var u=s.value;r?(u.removeAttribute("disabled"),u.removeAttribute("tabindex")):(u.setAttribute("disabled",""),u.setAttribute("tabindex","-1"))}}catch(e){c.e(e)}finally{c.f()}var h,d=_createForOfIteratorHelper(e.querySelectorAll('[data-panzoom-action="zoomOut"]'));try{for(d.s();!(h=d.n()).done;){var f=h.value;l?(f.removeAttribute("disabled"),f.removeAttribute("tabindex")):(f.setAttribute("disabled",""),f.setAttribute("tabindex","-1"))}}catch(e){d.e(e)}finally{d.f()}var p,v=_createForOfIteratorHelper(e.querySelectorAll('[data-panzoom-action="toggleZoom"],[data-panzoom-action="iterateZoom"]'));try{for(v.s();!(p=v.n()).done;){var g=p.value,m=(l||r?(g.removeAttribute("disabled"),g.removeAttribute("tabindex")):(g.setAttribute("disabled",""),g.setAttribute("tabindex","-1")),g.querySelector("g"));m&&(m.style.display=r?"":"none")}}catch(e){v.e(e)}finally{v.f()}}}}}},{key:"onDone",value:function(e,t){var i,n=this;null!=(i=t.panzoom)&&i.on("afterTransform",function(){n.instance.isCurrentSlide(t)&&n.onRefresh()}),this.instance.isCurrentSlide(t)&&this.onRefresh()}},{key:"createContainer",value:function(){var e,t,i=this.instance.container;return i?(e=this.option("parentEl")||i,t=document.createElement("div"),O(t,"fancybox__toolbar"),e.prepend(t),t.addEventListener("click",this.onClick,{passive:!1,capture:!0}),i&&O(i,"has-toolbar"),this.container=t):null}},{key:"createEl",value:function(e){var t=this,i=this.instance,n=i.carousel;if(!n)return null;if("toggleFS"===e)return null;if("fullscreen"===e&&!i.fsAPI)return null;var a,o=null,s=n.slides.length||0,r=0,l=0,c=_createForOfIteratorHelper(n.slides);try{for(c.s();!(a=c.n()).done;){var u=a.value;!u.panzoom&&"image"!==u.type||r++,"image"!==u.type&&!u.downloadSrc||l++}}catch(e){c.e(e)}finally{c.f()}if(!(s<2&&["infobar","prev","next"].includes(e))){if(void 0!==ve[e]&&!r)return null;if("download"===e&&!l)return null;if("thumbs"===e){i=i.plugins.Thumbs;if(!i||!i.isEnabled)return null}if("slideshow"===e&&(!n.plugins.Autoplay||s<2))return null;void 0!==ve[e]?(i=ve[e],(o=document.createElement("button")).setAttribute("title",this.instance.localize("{{".concat(e.toUpperCase(),"}}"))),O(o,"f-button"),i.action&&(o.dataset.panzoomAction=i.action),i.change&&(o.dataset.panzoomChange=JSON.stringify(i.change)),o.appendChild(m(this.instance.localize(i.icon)))):(h=(this.option("items")||[])[e])&&(o=m(this.instance.localize(h.tpl)),"function"==typeof h.click)&&o.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),"function"==typeof h.click&&h.click.call(t,t,e)});var h,d=null==o?void 0:o.querySelector("svg");if(d)for(var f=0,p=Object.entries(ge);f<p.length;f++){var v=_slicedToArray(p[f],2),g=v[0],v=v[1];d.getAttribute(g)||d.setAttribute(g,String(v))}}return o}},{key:"removeContainer",value:function(){var e=this.container,e=(e&&e.remove(),this.container=null,this.state=_.Disabled,this.instance.container);e&&v(e,"has-toolbar")}},{key:"attach",value:function(){var e=this,t=e.instance;t.on("Carousel.initSlides",e.onReady),t.on("done",e.onDone),t.on("reveal",e.onChange),t.on("Carousel.change",e.onChange),e.onReady(e.instance)}},{key:"detach",value:function(){var e=this,t=e.instance;t.off("Carousel.initSlides",e.onReady),t.off("done",e.onDone),t.off("reveal",e.onChange),t.off("Carousel.change",e.onChange),e.removeContainer()}}]),i}(),t=(Object.defineProperty(I,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{absolute:"auto",display:{left:["infobar"],middle:[],right:["iterateZoom","slideshow","fullscreen","thumbs","close"]},enabled:"auto",items:{infobar:{tpl:'<div class="fancybox__infobar" tabindex="-1"><span data-fancybox-current-index></span>/<span data-fancybox-count></span></div>'},download:{tpl:'<a class="f-button" title="{{DOWNLOAD}}" data-fancybox-download href="javasript:;"><svg><path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2M7 11l5 5 5-5M12 4v12"/></svg></a>'},prev:{tpl:'<button class="f-button" title="{{PREV}}" data-fancybox-prev><svg><path d="m15 6-6 6 6 6"/></svg></button>'},next:{tpl:'<button class="f-button" title="{{NEXT}}" data-fancybox-next><svg><path d="m9 6 6 6-6 6"/></svg></button>'},slideshow:{tpl:'<button class="f-button" title="{{TOGGLE_SLIDESHOW}}" data-fancybox-toggle-slideshow><svg><g><path d="M8 4v16l13 -8z"></path></g><g><path d="M8 4v15M17 4v15"/></g></svg></button>'},fullscreen:{tpl:'<button class="f-button" title="{{TOGGLE_FULLSCREEN}}" data-fancybox-toggle-fullscreen><svg><g><path d="M4 8V6a2 2 0 0 1 2-2h2M4 16v2a2 2 0 0 0 2 2h2M16 4h2a2 2 0 0 1 2 2v2M16 20h2a2 2 0 0 0 2-2v-2"/></g><g><path d="M15 19v-2a2 2 0 0 1 2-2h2M15 5v2a2 2 0 0 0 2 2h2M5 15h2a2 2 0 0 1 2 2v2M5 9h2a2 2 0 0 0 2-2V5"/></g></svg></button>'},thumbs:{tpl:'<button class="f-button" title="{{TOGGLE_THUMBS}}" data-fancybox-toggle-thumbs><svg><circle cx="5.5" cy="5.5" r="1"/><circle cx="12" cy="5.5" r="1"/><circle cx="18.5" cy="5.5" r="1"/><circle cx="5.5" cy="12" r="1"/><circle cx="12" cy="12" r="1"/><circle cx="18.5" cy="12" r="1"/><circle cx="5.5" cy="18.5" r="1"/><circle cx="12" cy="18.5" r="1"/><circle cx="18.5" cy="18.5" r="1"/></svg></button>'},close:{tpl:'<button class="f-button" title="{{CLOSE}}" data-fancybox-close><svg><path d="m19.5 4.5-15 15M4.5 4.5l15 15"/></svg></button>'}},parentEl:null}}),{Hash:S,Html:t,Images:n,Slideshow:i,Thumbs:o,Toolbar:I}),me="with-fancybox",ye="hide-scrollbar",be="--fancybox-scrollbar-compensate",we="--fancybox-body-margin",ke="is-animated",Te="is-compact",xe="is-loading",z=null,A=null,L=new Map,Ce=0,R=function(){_inherits(f,J);var l=_createSuper(f);function f(){var e,t,i,n,a,o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return _classCallCheck(this,f),e=l.call(this,s),Object.defineProperty(_assertThisInitialized(e),"userSlides",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(_assertThisInitialized(e),"userPlugins",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(_assertThisInitialized(e),"idle",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(_assertThisInitialized(e),"idleTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(_assertThisInitialized(e),"clickTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(_assertThisInitialized(e),"pwt",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(_assertThisInitialized(e),"ignoreFocusChange",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(_assertThisInitialized(e),"state",{enumerable:!0,configurable:!0,writable:!0,value:d.Init}),Object.defineProperty(_assertThisInitialized(e),"id",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(_assertThisInitialized(e),"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(_assertThisInitialized(e),"footer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(_assertThisInitialized(e),"caption",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(_assertThisInitialized(e),"carousel",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(_assertThisInitialized(e),"lastFocus",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(_assertThisInitialized(e),"prevMouseMoveEvent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(_assertThisInitialized(e),"fsAPI",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e.fsAPI=(a=n=i="",document.fullscreenEnabled?(i="requestFullscreen",n="exitFullscreen",a="fullscreenElement"):document.webkitFullscreenEnabled&&(i="webkitRequestFullscreen",n="webkitExitFullscreen",a="webkitFullscreenElement"),t=i?{request:function(e){return"webkitRequestFullscreen"===i?e[i](Element.ALLOW_KEYBOARD_INPUT):e[i]()},exit:function(){return document[a]&&document[n]()},isFullscreen:function(){return document[a]}}:t),e.id=s.id||++Ce,L.set(e.id,_assertThisInitialized(e)),e.userSlides=o,e.userPlugins=r,queueMicrotask(function(){e.init()}),e}return _createClass(f,[{key:"isIdle",get:function(){return this.idle}},{key:"isCompact",get:function(){return this.option("compact")}},{key:"init",value:function(){var e,t,i,n=this;this.state!==d.Destroy&&(this.state=d.Init,this.attachPlugins(Object.assign(Object.assign({},f.Plugins),this.userPlugins)),this.emit("init"),!0===this.option("hideScrollbar")&&C&&!(e=document.body).classList.contains(ye)&&((t=window.innerWidth-document.documentElement.getBoundingClientRect().width)<0&&(t=0),i=e.currentStyle||window.getComputedStyle(e),i=parseFloat(i.marginRight),document.documentElement.style.setProperty(be,"".concat(t,"px")),i&&e.style.setProperty(we,"".concat(i,"px")),e.classList.add(ye)),this.initLayout(),this.scale(),t=function(){n.initCarousel(n.userSlides),n.state=d.Ready,n.attachEvents(),n.emit("ready"),setTimeout(function(){n.container&&n.container.setAttribute("aria-hidden","false")},16)},i=this.fsAPI,this.option("Fullscreen.autoStart")&&i&&!i.isFullscreen()?i.request(this.container).then(t).catch(t):t())}},{key:"initLayout",value:function(){var e=this,t=this.option("parentEl")||document.body,i=m(this.localize(this.option("tpl.main")||""));i&&(i.setAttribute("id","fancybox-".concat(this.id)),i.setAttribute("aria-label",this.localize("{{MODAL}}")),i.classList.toggle(Te,this.isCompact),O(i,this.option("mainClass")||""),this.container=i,this.footer=i.querySelector(".fancybox__footer"),t.appendChild(i),O(document.documentElement,me),z&&A||(z=document.createElement("span"),O(z,"fancybox-focus-guard"),z.setAttribute("tabindex","0"),z.setAttribute("aria-hidden","true"),z.setAttribute("aria-label","Focus guard"),A=z.cloneNode(),null!=(t=i.parentElement)&&t.insertBefore(z,i),null==(t=i.parentElement))||t.append(A),this.option("animated")&&(O(i,ke),setTimeout(function(){e.isClosing()||v(i,ke)},350)),this.emit("initLayout"))}},{key:"initCarousel",value:function(e){var k=this,t=this.container;t&&(t=t.querySelector(".fancybox__carousel"))&&((t=this.carousel=new r(t,p({},{slides:e,transition:"fade",Panzoom:{lockAxis:this.option("dragToClose")?"xy":"x",infinite:!!this.option("dragToClose")&&"y"},Dots:!1,Navigation:{classes:{container:"fancybox__nav",button:"f-button",isNext:"is-next",isPrev:"is-prev"}},initialPage:this.option("startIndex"),l10n:this.option("l10n")},this.option("Carousel")||{}))).on("*",function(e,t){for(var i=arguments.length,n=new Array(2<i?i-2:0),a=2;a<i;a++)n[a-2]=arguments[a];k.emit.apply(k,["Carousel.".concat(t),e].concat(n))}),t.on(["ready","change"],function(){var e,t=k.getSlide();t&&null!=(e=t.panzoom)&&e.updateControls(),k.manageCaption(t)}),this.on("Carousel.removeSlide",function(e,t,i){i.contentEl&&(i.contentEl.remove(),i.contentEl=void 0);var n=i.el;n&&(v(n,"has-error"),v(n,"has-unknown"),v(n,"has-".concat(i.type||"unknown"))),i.closeBtnEl&&i.closeBtnEl.remove(),i.closeBtnEl=void 0,i.captionEl&&i.captionEl.remove(),i.captionEl=void 0,i.spinnerEl&&i.spinnerEl.remove(),i.spinnerEl=void 0,i.state=void 0}),t.on("Panzoom.touchStart",function(){var e;k.isCompact||k.endIdle(),null!=(e=document.activeElement)&&e.closest(".f-thumbs")&&null!=(e=k.container)&&e.focus()}),t.on("settle",function(){k.idleTimer||k.isCompact||!k.option("idle")||k.setIdle(),k.option("autoFocus")&&!k.isClosing&&k.checkFocus()}),this.option("dragToClose")&&(t.on("Panzoom.afterTransform",function(e,t){var i,n=k.getSlide();n&&j(n.el)||(n=k.container)&&(i=(i=Math.abs(t.current.f))<1?"":Math.max(.5,Math.min(1,1-i/t.contentRect.fitHeight*1.5)),n.style.setProperty("--fancybox-ts",i?"0s":""),n.style.setProperty("--fancybox-opacity",i+""))}),t.on("Panzoom.touchEnd",function(e,t,i){var n=k.getSlide();n&&j(n.el)||t.isMobile&&document.activeElement&&-1!==["TEXTAREA","INPUT"].indexOf(null==(n=document.activeElement)?void 0:n.nodeName)||(n=Math.abs(t.dragOffset.y),"y"===t.lockedAxis&&(200<=n||50<=n&&t.dragOffset.time<300)&&(i&&i.cancelable&&i.preventDefault(),k.close(i,"f-throwOut"+(t.current.f<0?"Up":"Down"))))})),t.on("change",function(e){var t=null==(t=k.getSlide())?void 0:t.triggerEl;t&&(e=new CustomEvent("slideTo",{bubbles:!0,cancelable:!0,detail:e.page}),t.dispatchEvent(e))}),t.on(["refresh","change"],function(e){var t=k.container;if(t){var i,n=_createForOfIteratorHelper(t.querySelectorAll("[data-fancybox-current-index]"));try{for(n.s();!(i=n.n()).done;)i.value.innerHTML=e.page+1}catch(e){n.e(e)}finally{n.f()}var a,o=_createForOfIteratorHelper(t.querySelectorAll("[data-fancybox-count]"));try{for(o.s();!(a=o.n()).done;)a.value.innerHTML=e.pages.length}catch(e){o.e(e)}finally{o.f()}if(!e.isInfinite){var s,r=_createForOfIteratorHelper(t.querySelectorAll("[data-fancybox-next]"));try{for(r.s();!(s=r.n()).done;){var l=s.value;e.page<e.pages.length-1?(l.removeAttribute("disabled"),l.removeAttribute("tabindex")):(l.setAttribute("disabled",""),l.setAttribute("tabindex","-1"))}}catch(e){r.e(e)}finally{r.f()}var c,u=_createForOfIteratorHelper(t.querySelectorAll("[data-fancybox-prev]"));try{for(u.s();!(c=u.n()).done;){var h=c.value;0<e.page?(h.removeAttribute("disabled"),h.removeAttribute("tabindex")):(h.setAttribute("disabled",""),h.setAttribute("tabindex","-1"))}}catch(e){u.e(e)}finally{u.f()}}var d=k.getSlide();if(d){var f,p=d.downloadSrc||"",v=(p||"image"!==d.type||d.error||"string"!=typeof d.src||(p=d.src),"disabled"),g="tabindex",m="download",y=_createForOfIteratorHelper(t.querySelectorAll("[data-fancybox-download]"));try{for(y.s();!(f=y.n()).done;){var b=f.value,w=d.downloadFilename;p?(b.removeAttribute(v),b.removeAttribute(g),b.setAttribute("href",p),b.setAttribute(m,w||p),b.setAttribute("target","_blank")):(b.setAttribute(v,""),b.setAttribute(g,"-1"),b.removeAttribute("href"),b.removeAttribute(m))}}catch(e){y.e(e)}finally{y.f()}}}}),this.emit("initCarousel"))}},{key:"attachEvents",value:function(){var e=this,t=e.container;t&&(t.addEventListener("click",e.onClick,{passive:!1,capture:!1}),t.addEventListener("wheel",e.onWheel,{passive:!1,capture:!1}),document.addEventListener("keydown",e.onKeydown,{passive:!1,capture:!0}),document.addEventListener("visibilitychange",e.onVisibilityChange,!1),document.addEventListener("mousemove",e.onMousemove),e.option("trapFocus")&&document.addEventListener("focus",e.onFocus,!0),window.addEventListener("resize",e.onResize),t=window.visualViewport)&&(t.addEventListener("scroll",e.onResize),t.addEventListener("resize",e.onResize))}},{key:"detachEvents",value:function(){var e=this,t=e.container;t&&(document.removeEventListener("keydown",e.onKeydown,{passive:!1,capture:!0}),t.removeEventListener("wheel",e.onWheel,{passive:!1,capture:!1}),t.removeEventListener("click",e.onClick,{passive:!1,capture:!1}),document.removeEventListener("mousemove",e.onMousemove),window.removeEventListener("resize",e.onResize),(t=window.visualViewport)&&(t.removeEventListener("resize",e.onResize),t.removeEventListener("scroll",e.onResize)),document.removeEventListener("visibilitychange",e.onVisibilityChange,!1),document.removeEventListener("focus",e.onFocus,!0))}},{key:"scale",value:function(){var e,t,i,n,a,o,s,r=this.container;r&&(e=window.visualViewport,t=Math.max(1,(null==e?void 0:e.scale)||1),s=o=a="",e&&1<t&&(i="".concat(e.offsetLeft,"px"),n="".concat(e.offsetTop,"px"),a=e.width*t+"px",o=e.height*t+"px",s="translate3d(".concat(i,", ").concat(n,", 0) scale(").concat(1/t,")")),r.style.transform=s,r.style.width=a,r.style.height=o)}},{key:"onClick",value:function(e){var t,i=this,n=this.container,a=this.isCompact;if(n&&!this.isClosing()){!a&&this.option("idle")&&this.resetIdle();var o=document.activeElement;if(!(re()&&o&&n.contains(o))){n=e.composedPath()[0];if(n!==(null==(t=this.carousel)?void 0:t.container))if(n.closest(".f-spinner")||n.closest("[data-fancybox-close]"))e.preventDefault(),this.close(e);else if(n.closest("[data-fancybox-prev]"))e.preventDefault(),this.prev();else if(n.closest("[data-fancybox-next]"))e.preventDefault(),this.next();else if(a&&"image"===(null==(t=this.getSlide())?void 0:t.type))this.clickTimer?(clearTimeout(this.clickTimer),this.clickTimer=null):this.clickTimer=setTimeout(function(){i.toggleIdle(),i.clickTimer=null},350);else if(this.emit("click",e),!e.defaultPrevented){a=!1;if(n.closest(".fancybox__content")){if(o){if(o.closest("[contenteditable]"))return;n.matches(ne)||o.blur()}if(re())return;a=this.option("contentClick")}else n.closest(".fancybox__carousel")&&!n.matches(ne)&&(a=this.option("backdropClick"));"close"===a?(e.preventDefault(),this.close(e)):"next"===a?(e.preventDefault(),this.next()):"prev"===a&&(e.preventDefault(),this.prev())}}}}},{key:"onWheel",value:function(e){var t=this.option("wheel",e),i="slide"===(t=null!=(i=e.target)&&i.closest(".fancybox__thumbs")?"slide":t),n=[-e.deltaX||0,-e.deltaY||0,-e.detail||0].reduce(function(e,t){return Math.abs(t)>Math.abs(e)?t:e}),n=Math.max(-1,Math.min(1,n)),a=Date.now();this.pwt&&a-this.pwt<300?i&&e.preventDefault():(this.pwt=a,this.emit("wheel",e),e.defaultPrevented||("close"===t?(e.preventDefault(),this.close(e)):"slide"===t&&(e.preventDefault(),this[0<n?"prev":"next"]())))}},{key:"onKeydown",value:function(e){var t,i,n,a;this.isTopmost()&&(this.isCompact||!this.option("idle")||this.isClosing()||this.resetIdle(),t=e.key,!(i=this.option("keyboard"))||e.ctrlKey||e.altKey||e.shiftKey||(n=e.composedPath()[0],a=(a=document.activeElement&&document.activeElement.classList)&&a.contains("f-button")||n.dataset.carouselPage||n.dataset.carouselIndex,"Escape"!==t&&!a&&u(n)&&(n.isContentEditable||-1!==["TEXTAREA","OPTION","INPUT","SELECT","VIDEO"].indexOf(n.nodeName)))||(this.emit("keydown",t,e),"function"!=typeof this[a=i[t]])||(e.preventDefault(),this[a]()))}},{key:"onResize",value:function(){var e,t=this.container;t&&(e=this.isCompact,t.classList.toggle("is-compact",e),this.manageCaption(this.getSlide()),this.isCompact?this.clearIdle():this.endIdle(),this.scale(),this.emit("resize"))}},{key:"onFocus",value:function(e){this.isTopmost()&&this.checkFocus(e)}},{key:"onMousemove",value:function(e){this.prevMouseMoveEvent=e,!this.isCompact&&this.option("idle")&&this.resetIdle()}},{key:"onVisibilityChange",value:function(){"visible"===document.visibilityState?this.checkFocus():this.endIdle()}},{key:"manageCloseBtn",value:function(e){var t=this.optionFor(e,"closeButton")||!1;if("auto"===t){var i=this.plugins.Toolbar;if(i&&i.state===_.Ready)return}t&&e.contentEl&&!e.closeBtnEl&&(i=this.option("tpl.closeButton"))&&(t=m(this.localize(i)),e.closeBtnEl=e.contentEl.appendChild(t),e.el)&&O(e.el,"has-close-btn")}},{key:"manageCaption",value:function(){var e,t=this,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:void 0,n="fancybox__caption",a="has-caption",o=this.container;if(o){var s,r,l,c=this.isCompact||this.option("commonCaption"),u=!c;if(this.caption&&this.stop(this.caption),u&&this.caption&&(this.caption.remove(),this.caption=null),c&&!this.caption){var h,d=_createForOfIteratorHelper((null==(s=this.carousel)?void 0:s.slides)||[]);try{for(d.s();!(h=d.n()).done;){var f=h.value;f.captionEl&&(f.captionEl.remove(),f.captionEl=void 0,v(f.el,a),null!=(e=f.el))&&e.removeAttribute("aria-labelledby")}}catch(e){d.e(e)}finally{d.f()}}!(i=i||this.getSlide())||c&&!this.isCurrentSlide(i)||(s=i.el,(r=this.optionFor(i,"caption",""))?(l=null,u?(l=i.captionEl||null,s&&!l&&(u=n+"_".concat(this.id,"_").concat(i.index),l=document.createElement("div"),O(l,n),l.setAttribute("id",u),i.captionEl=s.appendChild(l),O(s,a),s.setAttribute("aria-labelledby",u))):((l=(l=this.caption)||o.querySelector("."+n))||((l=document.createElement("div")).dataset.fancyboxCaption="",O(l,n),(this.footer||o).prepend(l)),O(o,a),this.caption=l),l&&(l.innerHTML="","string"==typeof r?l.innerHTML=r:r instanceof HTMLElement&&l.appendChild(r))):c&&this.caption&&this.animate(this.caption,"f-fadeOut",function(){t.caption&&(t.caption.innerHTML="")}))}}},{key:"checkFocus",value:function(e){var t,i=document.activeElement||null;i&&null!=(t=this.container)&&t.contains(i)||this.focus(e)}},{key:"focus",value:function(e){if(!this.ignoreFocusChange){var t=document.activeElement||null,i=(null==e?void 0:e.target)||null,n=this.container,a=this.getSlide();if(n&&null!=(p=this.carousel)&&p.viewport&&(e||!t||!n.contains(t))){var o=a&&a.state===w.Ready?a.el:null;if(o&&!o.contains(t)&&n!==t){e&&e.cancelable&&e.preventDefault(),this.ignoreFocusChange=!0;for(var s=[],r=null,l=0,c=Array.from(n.querySelectorAll(ne));l<c.length;l++){var u=c[l],h=!u.offsetParent||u.closest('[aria-hidden="true"]'),d=o&&o.contains(u),f=!this.carousel.viewport.contains(u);u===n||(d||f)&&!h?(s.push(u),void 0!==(d=u.dataset.origTabindex)&&d&&(u.tabIndex=parseFloat(d)),u.removeAttribute("data-orig-tabindex"),!u.hasAttribute("autoFocus")&&r||(r=u)):((f=void 0===u.dataset.origTabindex?u.getAttribute("tabindex")||"":u.dataset.origTabindex)&&(u.dataset.origTabindex=f),u.tabIndex=-1)}var p=null;e?(!i||s.indexOf(i)<0)&&(p=r||n,s.length)&&(t===A?p=s[0]:this.lastFocus!==n&&t!==z||(p=s[s.length-1])):p=(!a||"image"!==a.type)&&r||n,p&&U(p),this.lastFocus=document.activeElement,this.ignoreFocusChange=!1}}}}},{key:"next",value:function(){var e=this.carousel;e&&1<e.pages.length&&e.slideNext()}},{key:"prev",value:function(){var e=this.carousel;e&&1<e.pages.length&&e.slidePrev()}},{key:"jumpTo",value:function(){var e;this.carousel&&(e=this.carousel).slideTo.apply(e,arguments)}},{key:"isTopmost",value:function(){var e;return(null==(e=f.getInstance())?void 0:e.id)==this.id}},{key:"animate",value:function(){var e,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",a=2<arguments.length?arguments[2]:void 0;i&&n?(this.stop(i),e=function e(t){t.target===i&&i.dataset.animationName&&(i.removeEventListener("animationend",e),delete i.dataset.animationName,a&&a(),v(i,n))},i.dataset.animationName=n,i.addEventListener("animationend",e),O(i,n)):a&&a()}},{key:"stop",value:function(e){e&&e.dispatchEvent(new CustomEvent("animationend",{bubbles:!1,cancelable:!0,currentTarget:e}))}},{key:"setContent",value:function(e){var t,i,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",a=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];this.isClosing()||(t=e.el)&&(i=null,u(n)?i=n:(i=m(n+""),u(i)||((i=document.createElement("div")).innerHTML=n+"")),["img","picture","iframe","video","audio"].includes(i.nodeName.toLowerCase())&&((n=document.createElement("div")).appendChild(i),i=n),(i=u(i)&&e.filter&&!e.error?i.querySelector(e.filter):i)&&u(i)?(O(i,"fancybox__content"),e.id&&i.setAttribute("id",e.id),"none"!==i.style.display&&"none"!==getComputedStyle(i).getPropertyValue("display")||(i.style.display=e.display||this.option("defaultDisplay")||"flex"),t.classList.add("has-".concat(e.error?"error":e.type||"unknown")),t.prepend(i),e.contentEl=i,a&&this.revealContent(e),this.manageCloseBtn(e),this.manageCaption(e)):this.setError(e,"{{ELEMENT_NOT_FOUND}}"))}},{key:"revealContent",value:function(e,t){var i=this,n=e.el,a=e.contentEl;n&&a&&(this.emit("reveal",e),this.hideLoading(e),e.state=w.Opening,(t=this.isOpeningSlide(e)?void 0===t?this.optionFor(e,"showClass"):t:"f-fadeIn")?this.animate(a,t,function(){i.done(e)}):this.done(e))}},{key:"done",value:function(e){var t=this;this.isClosing()||(e.state=w.Ready,this.emit("done",e),O(e.el,"is-done"),this.isCurrentSlide(e)&&this.option("autoFocus")&&queueMicrotask(function(){t.option("autoFocus")&&(t.option("autoFocus")?t.focus():t.checkFocus())}),this.isOpeningSlide(e)&&!this.isCompact&&this.option("idle")&&this.setIdle())}},{key:"isCurrentSlide",value:function(e){var t=this.getSlide();return!(!e||!t)&&t.index===e.index}},{key:"isOpeningSlide",value:function(e){var t;return null===(null==(t=this.carousel)?void 0:t.prevPage)&&e.index===(null==(t=this.getSlide())?void 0:t.index)}},{key:"showLoading",value:function(t){var i=this,n=(t.state=w.Loading,t.el);n&&(O(n,xe),this.emit("loading",t),t.spinnerEl||setTimeout(function(){var e;i.isClosing()||t.spinnerEl||t.state!==w.Loading||(e=m(h),t.spinnerEl=e,n.prepend(e),i.animate(e,"f-fadeIn"))},250))}},{key:"hideLoading",value:function(e){var t,i=e.el;i&&(t=e.spinnerEl,this.isClosing()?null!=t&&t.remove():(v(i,xe),t&&this.animate(t,"f-fadeOut",function(){t.remove()}),e.state===w.Loading&&(this.emit("loaded",e),e.state=w.Ready)))}},{key:"setError",value:function(e,t){var i;this.isClosing()||(i=new Event("error",{bubbles:!0,cancelable:!0}),this.emit("error",i,e),i.defaultPrevented)||(e.error=t,this.hideLoading(e),this.clearContent(e),(i=document.createElement("div")).classList.add("fancybox-error"),i.innerHTML=this.localize(t||"<p>{{ERROR}}</p>"),this.setContent(e,i))}},{key:"clearContent",value:function(e){var t;null!=(t=this.carousel)&&t.emit("removeSlide",e)}},{key:"getSlide",value:function(){var e=this.carousel;return(null==(e=null==e?void 0:e.pages[null==e?void 0:e.page])?void 0:e.slides[0])||void 0}},{key:"close",value:function(e,t){var i,n,a=this;this.isClosing()||(i=new Event("shouldClose",{bubbles:!0,cancelable:!0}),this.emit("shouldClose",i,e),i.defaultPrevented)||(e&&e.cancelable&&(e.preventDefault(),e.stopPropagation()),i=this.fsAPI,n=function(){a.proceedClose(e,t)},i&&i.isFullscreen()?Promise.resolve(i.exit()).then(n):n())}},{key:"clearIdle",value:function(){this.idleTimer&&clearTimeout(this.idleTimer),this.idleTimer=null}},{key:"setIdle",value:function(){function e(){t.clearIdle(),t.idle=!0,O(t.container,"is-idle"),t.emit("setIdle")}var t=this,i=0<arguments.length&&void 0!==arguments[0]&&arguments[0];this.clearIdle(),this.isClosing()||(i?e():(i=this.option("idle"))&&(this.idleTimer=setTimeout(e,i)))}},{key:"endIdle",value:function(){this.clearIdle(),this.idle&&!this.isClosing()&&(this.idle=!1,v(this.container,"is-idle"),this.emit("endIdle"))}},{key:"resetIdle",value:function(){this.endIdle(),this.setIdle()}},{key:"toggleIdle",value:function(){this.idle?this.endIdle():this.setIdle(!0)}},{key:"toggleFullscreen",value:function(){var e=this.fsAPI;e&&(e.isFullscreen()?e.exit():this.container&&e.request(this.container))}},{key:"isClosing",value:function(){return[d.Closing,d.CustomClosing,d.Destroy].includes(this.state)}},{key:"proceedClose",value:function(e,t){var i=this,n=(this.state=d.Closing,this.clearIdle(),this.detachEvents(),this.container),a=this.carousel,o=this.getSlide(),s=o&&this.option("placeFocusBack")?o.triggerEl||this.option("triggerEl"):null;if(s&&(Z(s)?U(s):s.focus()),n&&(O(n,"is-closing"),n.setAttribute("aria-hidden","true"),this.option("animated")&&O(n,ke),n.style.pointerEvents="none"),a){a.clearTransitions(),null!=(s=a.panzoom)&&s.destroy(),null!=(n=a.plugins.Navigation)&&n.detach();var r,l=_createForOfIteratorHelper(a.slides);try{for(l.s();!(r=l.n()).done;){var c=r.value,u=(c.state=w.Closing,this.hideLoading(c),c.contentEl),h=(u&&this.stop(u),null==c?void 0:c.panzoom);h&&(h.stop(),h.detachEvents(),h.detachObserver()),this.isCurrentSlide(c)||a.emit("removeSlide",c)}}catch(e){l.e(e)}finally{l.f()}}this.emit("close",e),this.state!==d.CustomClosing?(t=void 0===t&&o?this.optionFor(o,"hideClass"):t)&&o?(this.animate(o.contentEl,t,function(){a&&a.emit("removeSlide",o)}),setTimeout(function(){i.destroy()},500)):this.destroy():setTimeout(function(){i.destroy()},500)}},{key:"destroy",value:function(){var e,t;this.state!==d.Destroy&&(this.state=d.Destroy,null!=(e=this.carousel)&&e.destroy(),(e=this.container)&&e.remove(),L.delete(this.id),(e=f.getInstance())?e.focus():(z&&(z.remove(),z=null),A&&(A.remove(),A=null),v(document.documentElement,me),C&&((t=(e=document).body).classList.remove(ye),t.style.setProperty(we,""),e.documentElement.style.setProperty(be,"")),this.emit("destroy")))}}],[{key:"bind",value:function(e,t,i){var n,a,o;C&&(o="",a={},void 0===e?n=document.body:"string"==typeof e?(n=document.body,o=e,"object"==_typeof(t)&&(a=t||{})):(n=e,"string"==typeof t&&(o=t),"object"==_typeof(i)&&(a=i||{})),n)&&u(n)&&(o=o||"[data-fancybox]",(e=f.openers.get(n)||new Map).set(o,a),f.openers.set(n,e),1===e.size)&&n.addEventListener("click",f.fromEvent)}},{key:"unbind",value:function(e,t){var i,n="";"string"==typeof e?(i=document.body,n=e):(i=e,"string"==typeof t&&(n=t)),i&&((e=f.openers.get(i))&&n&&e.delete(n),n&&e||(f.openers.delete(i),i.removeEventListener("click",f.fromEvent)))}},{key:"destroy",value:function(){for(var e;e=f.getInstance();)e.destroy();var t,i=_createForOfIteratorHelper(f.openers.keys());try{for(i.s();!(t=i.n()).done;)t.value.removeEventListener("click",f.fromEvent)}catch(e){i.e(e)}finally{i.f()}f.openers=new Map}},{key:"fromEvent",value:function(e){if(!e.defaultPrevented&&!(e.button&&0!==e.button||e.ctrlKey||e.metaKey||e.shiftKey)){var a,o,s,r,t,i,n,l,c=e.composedPath()[0],u=c.closest("[data-fancybox-trigger]");if(u&&(t=u.dataset.fancyboxTrigger||"",c=document.querySelectorAll('[data-fancybox="'.concat(t,'"]'))[parseInt(u.dataset.fancyboxIndex||"",10)||0]||c),c&&c instanceof Element)if(_toConsumableArray(f.openers).reverse().find(function(e){var e=_slicedToArray(e,2),n=e[0],e=e[1];return!(!n.contains(c)||!_toConsumableArray(e).reverse().find(function(e){var e=_slicedToArray(e,2),t=e[0],e=e[1],i=c.closest(t);return!!i&&(a=n,o=t,s=i,r=e,!0)}))}),a&&o&&s)return r=r||{},e.preventDefault(),c=s,t=[],(i=p({},ae,r)).event=e,i.triggerEl=c,i.delegate=u,e=i.groupAll,n=i.groupAttr,l=n&&c?c.getAttribute("".concat(n)):"",c&&!l&&!e||(t=[].slice.call(a.querySelectorAll(o))),!(t=c&&!e?l?t.filter(function(e){return e.getAttribute("".concat(n))===l}):[c]:t).length||(u=f.getInstance())&&u.options.triggerEl&&-1<t.indexOf(u.options.triggerEl)?void 0:(c&&(i.startIndex=t.indexOf(c)),f.fromNodes(t,i))}}},{key:"fromSelector",value:function(e,t){var i=null,n="";return"string"==typeof e?(i=document.body,n=e):e instanceof HTMLElement&&"string"==typeof t&&(i=e,n=t),!!(i&&n&&(e=f.openers.get(i))&&(t=e.get(n)))&&f.fromNodes(Array.from(i.querySelectorAll(n)),t)}},{key:"fromNodes",value:function(e,t){t=p({},ae,t||{});var i,n=[],a=_createForOfIteratorHelper(e);try{for(a.s();!(i=a.n()).done;){var o,s=i.value,r=s.dataset||{},l=r.src||s.getAttribute("href")||s.getAttribute("currentSrc")||s.getAttribute("src")||void 0,c=void 0,u=t.delegate,h=void 0,d=(c=(c=u&&n.length===t.startIndex?u instanceof HTMLImageElement?u:u.querySelector("img:not([aria-hidden])"):c)||(s instanceof HTMLImageElement?s:s.querySelector("img:not([aria-hidden])")),{src:l,triggerEl:s,thumbEl:c,thumbElSrc:h=c&&!(h=c.currentSrc||c.src||void 0)&&c.dataset?c.dataset.lazySrc||c.dataset.src||void 0:h,thumbSrc:h});for(o in r)d[o]=r[o]+"";n.push(d)}}catch(e){a.e(e)}finally{a.f()}return new f(n,t)}},{key:"getInstance",value:function(e){return e?L.get(e):Array.from(L.values()).reverse().find(function(e){return!e.isClosing()&&e})||null}},{key:"getSlide",value:function(){var e;return(null==(e=f.getInstance())?void 0:e.getSlide())||null}},{key:"show",value:function(){return new f(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],1<arguments.length&&void 0!==arguments[1]?arguments[1]:{})}},{key:"next",value:function(){var e=f.getInstance();e&&e.next()}},{key:"prev",value:function(){var e=f.getInstance();e&&e.prev()}},{key:"close",value:function(){for(var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t=arguments.length,i=new Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];if(e){var a,o=_createForOfIteratorHelper(L.values());try{for(o.s();!(a=o.n()).done;){var s=a.value;s.close.apply(s,i)}}catch(e){o.e(e)}finally{o.f()}}else{e=f.getInstance();e&&e.close.apply(e,i)}}}]),f}();Object.defineProperty(R,"version",{enumerable:!0,configurable:!0,writable:!0,value:"5.0.22"}),Object.defineProperty(R,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:ae}),Object.defineProperty(R,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(R,"openers",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),F.Carousel=r,F.Fancybox=R,F.Panzoom=f});